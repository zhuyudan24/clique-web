webpackJsonp([36],{"6iV/":function(e,t,r){"use strict";var n=r("H9GB"),o=r("Ml8i"),a=r("qFr1");e.exports={formats:a,parse:o,stringify:n}},EwKy:function(e,t){var r=window.location.origin;e.exports={config:r}},GblQ:function(e,t){},H9GB:function(e,t,r){"use strict";var n=r("JNAD"),o=r("qFr1"),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,o,a,i,s,c,u,p,d,f,g){var m=t;if("function"==typeof c)m=c(r,m);else if(m instanceof Date)m=d(m);else if(null===m){if(a)return s&&!g?s(r,l.encoder):r;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||n.isBuffer(m))return s?[f(g?r:s(r,l.encoder))+"="+f(s(m,l.encoder))]:[f(r)+"="+f(String(m))];var h,y=[];if(void 0===m)return y;if(Array.isArray(c))h=c;else{var v=Object.keys(m);h=u?v.sort(u):v}for(var b=0;b<h.length;++b){var w=h[b];i&&null===m[w]||(y=Array.isArray(m)?y.concat(e(m[w],o(r,w),o,a,i,s,c,u,p,d,f,g)):y.concat(e(m[w],r+(p?"."+w:"["+w+"]"),o,a,i,s,c,u,p,d,f,g)))}return y};e.exports=function(e,t){var r=e,i=t?n.assign({},t):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===i.delimiter?l.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:l.strictNullHandling,p="boolean"==typeof i.skipNulls?i.skipNulls:l.skipNulls,d="boolean"==typeof i.encode?i.encode:l.encode,f="function"==typeof i.encoder?i.encoder:l.encoder,g="function"==typeof i.sort?i.sort:null,m=void 0!==i.allowDots&&i.allowDots,h="function"==typeof i.serializeDate?i.serializeDate:l.serializeDate,y="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:l.encodeValuesOnly;if(void 0===i.format)i.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,i.format))throw new TypeError("Unknown format option provided.");var v,b,w=o.formatters[i.format];"function"==typeof i.filter?r=(b=i.filter)("",r):Array.isArray(i.filter)&&(v=b=i.filter);var x,j=[];if("object"!=typeof r||null===r)return"";x=i.arrayFormat in a?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var C=a[x];v||(v=Object.keys(r)),g&&v.sort(g);for(var S=0;S<v.length;++S){var O=v[S];p&&null===r[O]||(j=j.concat(s(r[O],O,C,u,p,d?f:null,b,g,m,h,w,y)))}var A=j.join(c),P=!0===i.addQueryPrefix?"?":"";return A.length>0?P+A:""}},JNAD:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],i=Object.keys(a),l=0;l<i.length;++l){var s=i[l],c=a[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:s}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var a=t.charCodeAt(n);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(n):a<128?r+=o[a]:a<2048?r+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?r+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(n+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(n)),r+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=a(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,a){n.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e(t[a],r,o):t.push(r):t[a]=r}),t):Object.keys(r).reduce(function(t,a){var i=r[a];return n.call(t,a)?t[a]=e(t[a],i,o):t[a]=i,t},i)}}},Ml8i:function(e,t,r){"use strict";var n=r("JNAD"),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),l=i?n.slice(0,i.index):n,s=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;s.push(l)}for(var c=0;null!==(i=a.exec(n))&&c<r.depth;){if(c+=1,!r.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+n.slice(i.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var a,i=e[o];if("[]"===i)a=(a=[]).concat(n);else{a=r.plainObjects?Object.create(null):{};var l="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,s=parseInt(l,10);!isNaN(s)&&i!==l&&String(s)===l&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(a=[])[s]=n:a[l]=n}n=a}return n}(s,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,l=n.split(t.delimiter,i),s=0;s<l.length;++s){var c,u,p=l[s],d=p.indexOf("]="),f=-1===d?p.indexOf("="):d+1;-1===f?(c=t.decoder(p,a.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,f),a.decoder),u=t.decoder(p.slice(f+1),a.decoder)),o.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r}(e,r):e,s=r.plainObjects?Object.create(null):{},c=Object.keys(l),u=0;u<c.length;++u){var p=c[u],d=i(p,l[p],r);s=n.merge(s,d,r)}return n.compact(s)}},P9l9:function(e,t,r){"use strict";r.d(t,"a",function(){return p}),r.d(t,"e",function(){return d}),r.d(t,"d",function(){return f}),r.d(t,"c",function(){return g}),r.d(t,"b",function(){return m});var n=r("rVsN"),o=r.n(n),a=r("lRwf"),i=r.n(a),l=r("6iV/"),s=r.n(l),c=r("Ip9M"),u=(r.n(c),window.location.origin);-1!=u.indexOf("localhost")&&(u="http://gicdev.demogic.com"),i.a.axios.interceptors.request.use(function(e){return e},function(e){return c.Message.error({message:"请求超时!"}),o.a.resolve(e)}),i.a.axios.interceptors.response.use(function(e){if(!e.status||200!=e.status||"error"!=e.data.status)return e;c.Message.error({message:e.data.msg})},function(e){return 504==e.response.status||404==e.response.status||e.response.status,o.a.resolve(e)});var p=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"get",url:""+u+e,data:{},params:t,headers:{"content-type":"application/x-www-form-urlencoded"}})},d=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:s.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}})},f=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:"{}",params:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})},g=function(e,t){return i.a.axios({method:"post",url:""+u+e,data:t,params:{requestProject:"gic-clique"},headers:{"Content-Type":"application/json;charset=UTF-8"}})},m=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:t,headers:{}})}},qFr1:function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"v/Se":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("P9l9"),o=r("EwKy"),a=r.n(o),i={name:"integralCloseAll",data:function(){return{projectName:"gic-clique",dateArr:[],dateArrNum:[],dateValue:"",month:"",enterpriseList:[],enterpriseId:"",tableData:[],currentPage:1,pageSize:20,totalCount:0,loading:!1,curSortType:"",downloadExcelDtlMsg:"",downloadExcelDtlBool:!0,downloadExcelAllMsg:"",downloadExcelAllBool:!0}},mounted:function(){this.getMonthData(),this.getEnterpriseList()},methods:{getMonthData:function(){var e=this;Object(n.a)("/api-report/month-list",{}).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.dateArr=r.result,e.dateValue=e.dateArr[0],r.result.forEach(function(t){var r=t.match(/\d+/g),n=r[0]+"-"+r[1];e.dateArrNum.push(n)}),e.month=e.dateArrNum[0],e.getList()):e.$message.error(r.message)})},getList:function(){var e=this;this.loading=!0;var t={paramTime:this.month,enterpriseId:this.enterpriseId,orderBy:this.curSortType,currentPage:this.currentPage,pageSize:this.pageSize};Object(n.e)("/api-report/list-clique-integral-report",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.tableData=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},getEnterpriseList:function(){var e=this;Object(n.e)("/api-admin/get-clique-list",{}).then(function(t){var r=t.data;if(0==r.errorCode){e.enterpriseList=r.result?r.result:[];e.enterpriseList.unshift({enterpriseId:"",enterpriseName:"所有商户"})}else e.$message.error(r.message)})},selectEnterprise:function(){this.currentPage=1,this.getList()},sortChange:function(e,t,r){var n=e.prop,o=e.order;"endStoreTypeExcel"==n?"ascending"===o?this.curSortType="1":"descending"===o&&(this.curSortType="2"):"brandName"==n?"ascending"===o?this.curSortType="3":"descending"===o&&(this.curSortType="4"):"settlementGroupName"==n?"ascending"===o?this.curSortType="5":"descending"===o&&(this.curSortType="6"):"integralSettlementValue"==n?"ascending"===o?this.curSortType="7":"descending"===o&&(this.curSortType="8"):"integralCostValue"==n&&("ascending"===o?this.curSortType="9":"descending"===o&&(this.curSortType="10")),this.getList()},getSelectMonth:function(e){var t=e.match(/\d+/g);this.month=t[0]+"-"+t[1],this.currentPage=1,this.getList()},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},renderHeader:function(e,t){e("span",[t.column.label],{attrs:{style:"text-align:left"}});return e("span",[t.column.label,e("el-popover",{attrs:{trigger:"hover",width:"190",placement:"top"}},[this.operation(e,t.column.label),e("i",{slot:"reference",attrs:{class:"iconfont tooltip-icon icon-xinxixianshi",style:"padding-left:4px;cursor:pointer"}})])])},operation:function(e,t){var r=[];return"结算归属"==t&&(r=[e("span",{},[e("span",{slot:"content"},["结算归属为空值的主要原因：1、该成本主体未分配归属；2、该成本主体门店状态非上线状态，无法进行分配归属"])])]),r},downloadExcelDtl:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelDtlBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(n.e)("/api-report/report-clique-integral-detail",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=a.a.config+"/api-report/report-clique-integral-detail?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var o=60;window.myTimer=setInterval(function(){e.downloadExcelDtlBool=!1,(o=--o<10?"0"+o:o)<1?(clearInterval(window.myTimer),e.downloadExcelDtlBool=!0):e.downloadExcelDtlMsg="倒计时"+o+"秒"},1e3)}}else e.$message.error("没有可导出的数据")},downloadExcelAll:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelAllBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(n.e)("/api-report/report-clique-integral-report",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=a.a.config+"/api-report/report-clique-integral-report?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var o=60;window.myTimer2=setInterval(function(){e.downloadExcelAllBool=!1,(o=--o<10?"0"+o:o)<1?(clearInterval(window.myTimer2),e.downloadExcelAllBool=!0):e.downloadExcelAllMsg="倒计时"+o+"秒"},1e3)}}else e.$message.error("没有可导出的数据")}},beforeRouteLeave:function(e,t,r){window.myTimer&&clearInterval(window.myTimer),window.myTimer2&&clearInterval(window.myTimer2),r()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"integral-all-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("el-select",{attrs:{placeholder:"请选择月份"},on:{change:e.getSelectMonth},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}},e._l(e.dateArr,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),r("el-select",{staticClass:"select-m-both",attrs:{placeholder:"请选择"},on:{change:e.selectEnterprise},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}},e._l(e.enterpriseList,function(e){return r("el-option",{key:e.enterpriseId,attrs:{label:e.enterpriseName,value:e.enterpriseId}})}),1),e._v(" "),e.downloadExcelDtlBool?r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.downloadExcelDtl}},[e._v("导出明细数据")]):r("el-button",{staticClass:"fr",attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelDtlMsg))]),e._v(" "),e.downloadExcelAllBool?r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:e.downloadExcelAll}},[e._v("导出汇总数据")]):r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"8px"},attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelAllMsg))])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"myTable",staticClass:"table-no-line-wrap",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.sortChange}},[r("el-table-column",{attrs:{prop:"storeName",label:"成本主体"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.endStoreName))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.endStoreCode))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"endStoreTypeExcel",label:"成本主体类型",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"brandName",label:"成本主体所属商户",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"settlementGroupName",label:"结算归属",sortable:"custom","render-header":e.renderHeader}}),e._v(" "),r("el-table-column",{attrs:{prop:"integralSettlementValue",label:"结算总积分",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"integralCostValue",label:"结算总成本金额",sortable:"custom",width:"150"}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var s=r("C7Lr")(i,l,!1,function(e){r("GblQ")},"data-v-ec32e996",null);t.default=s.exports}});
//# sourceMappingURL=36.ac9bfe3e1b9dd9e02f76.js.map