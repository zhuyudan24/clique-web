webpackJsonp([13,29,30,36],{"0xDb":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r("ZLEe"),n=(r.n(a),r("hRKE")),o=(r.n(n),function(e){0})},"3Xzz":function(e,t,r){"use strict";var a=r("P9l9"),n=r("Ch4/"),o=r("0xDb"),i={name:"navpath",data:function(){return{projectName:"gic-clique",navpath:[{name:"首页",path:""},{name:"",path:""},{name:"",path:""}]}},props:{navtip:{type:Boolean,default:!1}},methods:{changeRoute:function(e){Object(o.a)(e),this.$router.push(e)},getNavPath:function(){var e=this,t={project:e.projectName,path:e.$route.path.split("/")[1]};Object(a.e)("/api-auth/get-current-memu-data",t).then(function(t){var r=t.data;if(0==r.errorCode)return r.result?(e.navpath=[],r.result.list&&r.result.list.length&&r.result.list.forEach(function(t,a){t.name=t.menuName,t.path="",a==r.result.list.length-1&&(t.path="/"+t.menuUrl),a>0&&e.navpath.push(t)}),void Object(o.a)("///>>>>",e.navpath)):void Object(o.a)("resData.result: ",r.result);n.a.errorMsg(r)}).catch(function(t){Object(o.a)(t),e.$message.error({duration:1e3,message:t.message})})}},mounted:function(){this.getNavPath()}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"navwrap boxbttom"},[r("el-breadcrumb",{attrs:{separator:"/"}},[e._l(e.navpath,function(t,a){return[t.path?[r("el-breadcrumb-item",{key:a,attrs:{to:{path:t.path}},on:{click:function(r){return e.changeRoute(t.path)}}},[r("span",{staticClass:"el-breadcrumb__inner is-link",on:{click:function(r){return e.changeRoute(t.path)}}},[e._v(e._s(t.name))])])]:[r("el-breadcrumb-item",{key:a},[e._v(e._s(t.name))])]]})],2),e._v(" "),r("h1",{staticClass:"navtitle"},[e._v(e._s(e.navpath[e.navpath.length-1].name))]),e._v(" "),1==e.navtip?r("div",{staticClass:"navtip navmTop"},[r("i",{staticClass:"el-icon-info navtipcolor"}),e._v("变更导航个数，移动顺序，更换页面链接均需提交小程序审核后重新发布生效，其他变更立即生效。小程序审核请联系品牌项目经理。")]):e._e()],1)},staticRenderFns:[]};var l=r("C7Lr")(i,s,!1,function(e){r("pTUQ")},"data-v-320a30ce",null);t.a=l.exports},"6iV/":function(e,t,r){"use strict";var a=r("H9GB"),n=r("Ml8i"),o=r("qFr1");e.exports={formats:o,parse:n,stringify:a}},"91KT":function(e,t){},"9pzS":function(e,t){},"Ch4/":function(e,t,r){"use strict";var a=r("Ip9M");r.n(a);t.a={errorMsg:function(e){var t=window.location.origin;if(t.indexOf("localhost")&&(t="http://gicdev.demogic.com"),0!=e.errorCode){if(401==e.errorCode)return window.location.href=t+"/gic-web/#/",!1;a.Message.error({duration:1e3,message:e.message})}}}},EwKy:function(e,t){var r=window.location.origin;e.exports={config:r}},GblQ:function(e,t){},H9GB:function(e,t,r){"use strict";var a=r("JNAD"),n=r("qFr1"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,n,o,i,l,c,u,d,p,m,h){var f=t;if("function"==typeof c)f=c(r,f);else if(f instanceof Date)f=p(f);else if(null===f){if(o)return l&&!h?l(r,s.encoder):r;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||a.isBuffer(f))return l?[m(h?r:l(r,s.encoder))+"="+m(l(f,s.encoder))]:[m(r)+"="+m(String(f))];var g,v=[];if(void 0===f)return v;if(Array.isArray(c))g=c;else{var b=Object.keys(f);g=u?b.sort(u):b}for(var y=0;y<g.length;++y){var w=g[y];i&&null===f[w]||(v=Array.isArray(f)?v.concat(e(f[w],n(r,w),n,o,i,l,c,u,d,p,m,h)):v.concat(e(f[w],r+(d?"."+w:"["+w+"]"),n,o,i,l,c,u,d,p,m,h)))}return v};e.exports=function(e,t){var r=e,i=t?a.assign({},t):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===i.delimiter?s.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,d="boolean"==typeof i.skipNulls?i.skipNulls:s.skipNulls,p="boolean"==typeof i.encode?i.encode:s.encode,m="function"==typeof i.encoder?i.encoder:s.encoder,h="function"==typeof i.sort?i.sort:null,f=void 0!==i.allowDots&&i.allowDots,g="function"==typeof i.serializeDate?i.serializeDate:s.serializeDate,v="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:s.encodeValuesOnly;if(void 0===i.format)i.format=n.default;else if(!Object.prototype.hasOwnProperty.call(n.formatters,i.format))throw new TypeError("Unknown format option provided.");var b,y,w=n.formatters[i.format];"function"==typeof i.filter?r=(y=i.filter)("",r):Array.isArray(i.filter)&&(b=y=i.filter);var C,x=[];if("object"!=typeof r||null===r)return"";C=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var S=o[C];b||(b=Object.keys(r)),h&&b.sort(h);for(var A=0;A<b.length;++A){var I=b[A];d&&null===r[I]||(x=x.concat(l(r[I],I,S,u,d,p?m:null,y,h,f,g,w,v)))}var j=x.join(c),N=!0===i.addQueryPrefix?"?":"";return j.length>0?N+j:""}},JNAD:function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)void 0!==e[a]&&(r[a]=e[a]);return r};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],a=0;a<t.length;++a)for(var n=t[a],o=n.obj[n.prop],i=Object.keys(o),s=0;s<i.length;++s){var l=i[s],c=o[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:l}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var a=[],n=0;n<t.length;++n)void 0!==t[n]&&a.push(t[n]);r.obj[r.prop]=a}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",a=0;a<t.length;++a){var o=t.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(a):o<128?r+=n[o]:o<2048?r+=n[192|o>>6]+n[128|63&o]:o<55296||o>=57344?r+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),r+=n[240|o>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(n.plainObjects||n.allowPrototypes||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=o(t,n)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,o){a.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e(t[o],r,n):t.push(r):t[o]=r}),t):Object.keys(r).reduce(function(t,o){var i=r[o];return a.call(t,o)?t[o]=e(t[o],i,n):t[o]=i,t},i)}}},Ml8i:function(e,t,r){"use strict";var a=r("JNAD"),n=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t,r){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(a),s=i?a.slice(0,i.index):a,l=[];if(s){if(!r.plainObjects&&n.call(Object.prototype,s)&&!r.allowPrototypes)return;l.push(s)}for(var c=0;null!==(i=o.exec(a))&&c<r.depth;){if(c+=1,!r.plainObjects&&n.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(i[1])}return i&&l.push("["+a.slice(i.index)+"]"),function(e,t,r){for(var a=t,n=e.length-1;n>=0;--n){var o,i=e[n];if("[]"===i)o=(o=[]).concat(a);else{o=r.plainObjects?Object.create(null):{};var s="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,l=parseInt(s,10);!isNaN(l)&&i!==s&&String(l)===s&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[])[l]=a:o[s]=a}a=o}return a}(l,t,r)}};e.exports=function(e,t){var r=t?a.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var r={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=a.split(t.delimiter,i),l=0;l<s.length;++l){var c,u,d=s[l],p=d.indexOf("]="),m=-1===p?d.indexOf("="):p+1;-1===m?(c=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,m),o.decoder),u=t.decoder(d.slice(m+1),o.decoder)),n.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r}(e,r):e,l=r.plainObjects?Object.create(null):{},c=Object.keys(s),u=0;u<c.length;++u){var d=c[u],p=i(d,s[d],r);l=a.merge(l,p,r)}return a.compact(l)}},P9l9:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"e",function(){return p}),r.d(t,"d",function(){return m}),r.d(t,"c",function(){return h}),r.d(t,"b",function(){return f});var a=r("rVsN"),n=r.n(a),o=r("lRwf"),i=r.n(o),s=r("6iV/"),l=r.n(s),c=r("Ip9M"),u=(r.n(c),window.location.origin);-1!=u.indexOf("localhost")&&(u="http://gicdev.demogic.com"),i.a.axios.interceptors.request.use(function(e){return e},function(e){return c.Message.error({message:"请求超时!"}),n.a.resolve(e)}),i.a.axios.interceptors.response.use(function(e){if(!e.status||200!=e.status||"error"!=e.data.status)return e;c.Message.error({message:e.data.msg})},function(e){return 504==e.response.status||404==e.response.status||e.response.status,n.a.resolve(e)});var d=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"get",url:""+u+e,data:{},params:t,headers:{"content-type":"application/x-www-form-urlencoded"}})},p=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:l.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}})},m=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:"{}",params:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})},h=function(e,t){return i.a.axios({method:"post",url:""+u+e,data:t,params:{requestProject:"gic-clique"},headers:{"Content-Type":"application/json;charset=UTF-8"}})},f=function(e,t){return t.requestProject="gic-clique",i.a.axios({method:"post",url:""+u+e,data:t,headers:{}})}},bkUg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7Krh"),n=r("P9l9"),o=r("mt/x"),i=r.n(o),s=r("EwKy"),l=r.n(s),c={name:"cardExcel",data:function(){return{projectName:"gic-clique",dateArr:[],dateArrNum:[],dateValue:"",month:"",enterpriseList:[],enterpriseId:"",tableData:[],currentPage:1,pageSize:20,totalCount:0,defaultImg:i.a,loading:!1,curSortType:"",downloadExcelMsg:"",downloadExcelBool:!0}},filters:{dateFormatNew:function(e,t){return Object(a.dateFormat)(e,t)}},mounted:function(){this.getMonthData(),this.getEnterpriseList()},methods:{getMonthData:function(){var e=this;Object(n.a)("/api-report/month-list",{}).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.dateArr=r.result,e.dateValue=e.dateArr[0],r.result.forEach(function(t){var r=t.match(/\d+/g),a=r[0]+"-"+r[1];e.dateArrNum.push(a)}),e.month=e.dateArrNum[0],e.getList()):e.$message.error(r.message)})},getList:function(){var e=this;this.loading=!0;var t={paramTime:this.month,enterpriseId:this.enterpriseId,orderBy:this.curSortType,currentPage:this.currentPage,pageSize:this.pageSize};Object(n.e)("/api-report/list-clique-integral-coup-exchange",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.tableData=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},getEnterpriseList:function(){var e=this;Object(n.e)("/api-admin/get-clique-list",{}).then(function(t){var r=t.data;if(0==r.errorCode){e.enterpriseList=r.result?r.result:[];e.enterpriseList.unshift({enterpriseId:"",enterpriseName:"所有商户"})}else e.$message.error(r.message)})},selectEnterprise:function(){this.currentPage=1,this.getList()},sortChange:function(e,t,r){var a=e.prop,n=e.order;"checkTime"==a?"ascending"===n?this.curSortType="1":"descending"===n&&(this.curSortType="2"):"exchangeTime"==a?"ascending"===n?this.curSortType="3":"descending"===n&&(this.curSortType="4"):"checkStoreName"==a&&("ascending"===n?this.curSortType="5":"descending"===n&&(this.curSortType="6")),this.getList()},getSelectMonth:function(e){var t=e.match(/\d+/g);this.month=t[0]+"-"+t[1],this.currentPage=1,this.getList()},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},downloadExcel:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(n.e)("/api-report/report-clique-integral-coup-exchange",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=l.a.config+"/api-report/report-clique-integral-coup-exchange?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var a=60;window.myTimer4=setInterval(function(){e.downloadExcelBool=!1,(a=--a<10?"0"+a:a)<1?(clearInterval(window.myTimer4),e.downloadExcelBool=!0):e.downloadExcelMsg="倒计时"+a+"秒"},1e3)}}else e.$message.error("没有可导出的数据")}},beforeRouteLeave:function(e,t,r){window.myTimer4&&clearInterval(window.myTimer4),r()}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"integral-all-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("el-select",{attrs:{placeholder:"请选择月份"},on:{change:e.getSelectMonth},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}},e._l(e.dateArr,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),r("el-select",{staticClass:"select-m-both",attrs:{placeholder:"请选择"},on:{change:e.selectEnterprise},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}},e._l(e.enterpriseList,function(e){return r("el-option",{key:e.enterpriseId,attrs:{label:e.enterpriseName,value:e.enterpriseId}})}),1),e._v(" "),e.downloadExcelBool?r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.downloadExcel}},[e._v("导出数据")]):r("el-button",{staticClass:"fr",attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelMsg))])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"myTable",staticClass:"table-no-line-wrap",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.sortChange}},[r("el-table-column",{attrs:{prop:"checkTime",label:"使用时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(e._f("dateFormatNew")(t.row.checkTime,"YYYY-MM-DD")))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v(e._s(e._f("dateFormatNew")(t.row.checkTime,"hh:mm:ss")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"exchangeTime",label:"兑换时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(e._f("dateFormatNew")(t.row.exchangeTime,"YYYY-MM-DD")))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v(e._s(e._f("dateFormatNew")(t.row.exchangeTime,"hh:mm:ss")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"coupName",label:"卡券名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.coupName?t.row.coupName:"--")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"coupDenomination",label:"卡券面额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.coupDenomination?t.row.coupDenomination:"--")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"checkStoreName",label:"核销门店",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.checkStoreName?t.row.checkStoreName:"--"))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.checkStoreCode?t.row.checkStoreCode:"--"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"checkStoreTypeName",label:"核销门店类型"}}),e._v(" "),r("el-table-column",{attrs:{prop:"brandName",label:"所属商户"}}),e._v(" "),r("el-table-column",{attrs:{prop:"memberName",label:"会员信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"member-info clearfix"},[r("img",{staticClass:"img fl",attrs:{src:t.row.thirdImgUrl?t.row.thirdImgUrl:e.defaultImg,width:"40px",height:"40px"}}),e._v(" "),r("p",{staticClass:"info fl"},[e._v(e._s(t.row.memberName))])])]}}])})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=r("C7Lr")(c,u,!1,function(e){r("9pzS")},"data-v-4d01dc59",null);t.default=d.exports},elV0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("P9l9"),n=r("mt/x"),o=r.n(n),i=r("EwKy"),s=r.n(i),l={name:"integralExcel",data:function(){return{projectName:"gic-clique",dateArr:[],dateArrNum:[],dateValue:"",month:"",enterpriseList:[],enterpriseId:"",tableData:[],currentPage:1,pageSize:20,totalCount:0,defaultImg:o.a,loading:!1,curSortType:"",downloadExcelMsg:"",downloadExcelBool:!0}},mounted:function(){this.getMonthData(),this.getEnterpriseList()},methods:{getMonthData:function(){var e=this;Object(a.a)("/api-report/month-list",{}).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.dateArr=r.result,e.dateValue=e.dateArr[0],r.result.forEach(function(t){var r=t.match(/\d+/g),a=r[0]+"-"+r[1];e.dateArrNum.push(a)}),e.month=e.dateArrNum[0],e.getList()):e.$message.error(r.message)})},getList:function(){var e=this;this.loading=!0;var t={paramTime:this.month,enterpriseId:this.enterpriseId,orderBy:this.curSortType,currentPage:this.currentPage,pageSize:this.pageSize};Object(a.e)("/api-report/list-clique-integral-order",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.tableData=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},getEnterpriseList:function(){var e=this;Object(a.e)("/api-admin/get-clique-list",{}).then(function(t){var r=t.data;if(0==r.errorCode){e.enterpriseList=r.result?r.result:[];e.enterpriseList.unshift({enterpriseId:"",enterpriseName:"所有商户"})}else e.$message.error(r.message)})},selectEnterprise:function(){this.currentPage=1,this.getList()},sortChange:function(e,t,r){var a=e.prop,n=e.order;"orderTime"==a?"ascending"===n?this.curSortType="1":"descending"===n&&(this.curSortType="2"):"mainStoreName"==a?"ascending"===n?this.curSortType="3":"descending"===n&&(this.curSortType="4"):"openStoreName"==a&&("ascending"===n?this.curSortType="5":"descending"===n&&(this.curSortType="6")),this.getList()},getSelectMonth:function(e){var t=e.match(/\d+/g);this.month=t[0]+"-"+t[1],this.currentPage=1,this.getList()},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},downloadExcel:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(a.e)("/api-report/report-clique-integral-order",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=s.a.config+"/api-report/report-clique-integral-order?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var n=60;window.myTimer3=setInterval(function(){e.downloadExcelBool=!1,(n=--n<10?"0"+n:n)<1?(clearInterval(window.myTimer3),e.downloadExcelBool=!0):e.downloadExcelMsg="倒计时"+n+"秒"},1e3)}}else e.$message.error("没有可导出的数据")}},beforeRouteLeave:function(e,t,r){window.myTimer3&&clearInterval(window.myTimer3),r()}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"integral-all-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("el-select",{attrs:{placeholder:"请选择月份"},on:{change:e.getSelectMonth},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}},e._l(e.dateArr,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),r("el-select",{staticClass:"select-m-both",attrs:{placeholder:"请选择"},on:{change:e.selectEnterprise},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}},e._l(e.enterpriseList,function(e){return r("el-option",{key:e.enterpriseId,attrs:{label:e.enterpriseName,value:e.enterpriseId}})}),1),e._v(" "),e.downloadExcelBool?r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.downloadExcel}},[e._v("导出数据")]):r("el-button",{staticClass:"fr",attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelMsg))])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"myTable",staticClass:"table-no-line-wrap",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.sortChange}},[r("el-table-column",{attrs:{prop:"orderTime",label:"订单完成时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(e._f("dateFormat")(t.row.orderTime,"YYYY-MM-DD")))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v(e._s(e._f("dateFormat")(t.row.orderTime,"hh:mm:ss")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"channelType",label:"来源渠道"}}),e._v(" "),r("el-table-column",{attrs:{prop:"integralCost",label:"抵现金额"}}),e._v(" "),r("el-table-column",{attrs:{prop:"brandName",label:"所属商户"}}),e._v(" "),r("el-table-column",{attrs:{prop:"clerkTotalCommission",label:"会员信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"member-info clearfix"},[r("img",{staticClass:"img fl",attrs:{src:t.row.thirdImgUrl?t.row.thirdImgUrl:e.defaultImg,width:"40px",height:"40px"}}),e._v(" "),r("p",{staticClass:"info fl"},[e._v(e._s(t.row.memberName))])])]}}])},[e._v(" "),void 0],2),e._v(" "),r("el-table-column",{attrs:{prop:"mainStoreName",label:"服务门店信息",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.mainStoreName?t.row.mainStoreName:"--"))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.mainStoreCode?t.row.mainStoreCode:"--"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"openStoreName",label:"开卡门店信息",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.openStoreName?t.row.openStoreName:"--"))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.openStoreCode?t.row.openStoreCode:"--"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"deliverStoreName",label:"发货门店信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.deliverStoreName?t.row.deliverStoreName:"--"))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.deliverStoreCode?t.row.deliverStoreCode:"--"))])]}}])})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var u=r("C7Lr")(l,c,!1,function(e){r("p5RF")},"data-v-bfde0580",null);t.default=u.exports},kNvF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("3Xzz"),n=r("P9l9"),o=r("v/Se"),i=r("bkUg"),s=r("elV0"),l={name:"integralReport",data:function(){return{repProjectName:"gic-clique",memberTab:"first",loading:!1}},mounted:function(){},methods:{getEnterpriseList:function(){var e=this;Object(n.e)("/api-admin/clique-integral-enterprise",{}).then(function(t){var r=t.data;0==r.errorCode?(e.applyList=r.result?r.result:[],e.enterpriseId=e.applyList[0].enterpriseId,e.enterpriseNum=0,e.applyList.forEach(function(t){t.isEdit||e.enterpriseNum++})):e.$message.error(r.message)})}},components:{topNav:a.a,closeAllExcel:o.default,cardExcel:i.default,integralExcel:s.default}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"right-wrap"},[r("topNav"),e._v(" "),r("div",{staticClass:"right-content"},[r("div",{staticClass:"right-box"},[r("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.memberTab,callback:function(t){e.memberTab=t},expression:"memberTab"}},[r("el-tab-pane",{attrs:{label:"结算汇总表",name:"first"}},[r("div",{staticClass:"my-tab-content"},[r("closeAllExcel")],1)]),e._v(" "),r("el-tab-pane",{attrs:{label:"结算补贴 - 卡券兑换",name:"second"}},[r("div",{staticClass:"my-tab-content"},[r("cardExcel")],1)]),e._v(" "),r("el-tab-pane",{attrs:{label:"结算补贴 - 积分抵现",name:"third"}},[r("div",{staticClass:"my-tab-content"},[r("integralExcel")],1)])],1)],1)]),e._v(" "),r("vue-gic-footer")],1)},staticRenderFns:[]};var u=r("C7Lr")(l,c,!1,function(e){r("91KT")},"data-v-71e6b368",null);t.default=u.exports},"mt/x":function(e,t){e.exports="data:image/jpeg;base64,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"},p5RF:function(e,t){},pTUQ:function(e,t){},qFr1:function(e,t,r){"use strict";var a=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"v/Se":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("P9l9"),n=r("EwKy"),o=r.n(n),i={name:"integralCloseAll",data:function(){return{projectName:"gic-clique",dateArr:[],dateArrNum:[],dateValue:"",month:"",enterpriseList:[],enterpriseId:"",tableData:[],currentPage:1,pageSize:20,totalCount:0,loading:!1,curSortType:"",downloadExcelDtlMsg:"",downloadExcelDtlBool:!0,downloadExcelAllMsg:"",downloadExcelAllBool:!0}},mounted:function(){this.getMonthData(),this.getEnterpriseList()},methods:{getMonthData:function(){var e=this;Object(a.a)("/api-report/month-list",{}).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.dateArr=r.result,e.dateValue=e.dateArr[0],r.result.forEach(function(t){var r=t.match(/\d+/g),a=r[0]+"-"+r[1];e.dateArrNum.push(a)}),e.month=e.dateArrNum[0],e.getList()):e.$message.error(r.message)})},getList:function(){var e=this;this.loading=!0;var t={paramTime:this.month,enterpriseId:this.enterpriseId,orderBy:this.curSortType,currentPage:this.currentPage,pageSize:this.pageSize};Object(a.e)("/api-report/list-clique-integral-report",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.tableData=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},getEnterpriseList:function(){var e=this;Object(a.e)("/api-admin/get-clique-list",{}).then(function(t){var r=t.data;if(0==r.errorCode){e.enterpriseList=r.result?r.result:[];e.enterpriseList.unshift({enterpriseId:"",enterpriseName:"所有商户"})}else e.$message.error(r.message)})},selectEnterprise:function(){this.currentPage=1,this.getList()},sortChange:function(e,t,r){var a=e.prop,n=e.order;"endStoreTypeExcel"==a?"ascending"===n?this.curSortType="1":"descending"===n&&(this.curSortType="2"):"brandName"==a?"ascending"===n?this.curSortType="3":"descending"===n&&(this.curSortType="4"):"settlementGroupName"==a?"ascending"===n?this.curSortType="5":"descending"===n&&(this.curSortType="6"):"integralSettlementValue"==a?"ascending"===n?this.curSortType="7":"descending"===n&&(this.curSortType="8"):"integralCostValue"==a&&("ascending"===n?this.curSortType="9":"descending"===n&&(this.curSortType="10")),this.getList()},getSelectMonth:function(e){var t=e.match(/\d+/g);this.month=t[0]+"-"+t[1],this.currentPage=1,this.getList()},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},renderHeader:function(e,t){e("span",[t.column.label],{attrs:{style:"text-align:left"}});return e("span",[t.column.label,e("el-popover",{attrs:{trigger:"hover",width:"190",placement:"top"}},[this.operation(e,t.column.label),e("i",{slot:"reference",attrs:{class:"iconfont tooltip-icon icon-xinxixianshi",style:"padding-left:4px;cursor:pointer"}})])])},operation:function(e,t){var r=[];return"结算归属"==t&&(r=[e("span",{},[e("span",{slot:"content"},["结算归属为空值的主要原因：1、该成本主体未分配归属；2、该成本主体门店状态非上线状态，无法进行分配归属"])])]),r},downloadExcelDtl:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelDtlBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(a.e)("/api-report/report-clique-integral-detail",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=o.a.config+"/api-report/report-clique-integral-detail?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var n=60;window.myTimer=setInterval(function(){e.downloadExcelDtlBool=!1,(n=--n<10?"0"+n:n)<1?(clearInterval(window.myTimer),e.downloadExcelDtlBool=!0):e.downloadExcelDtlMsg="倒计时"+n+"秒"},1e3)}}else e.$message.error("没有可导出的数据")},downloadExcelAll:function(){var e=this,t=this.tableData.length>0;if(t){if(e.downloadExcelAllBool&&t){var r={requestProject:e.projectName,paramTime:e.month,enterpriseId:e.enterpriseId,currentPage:e.currentPage,pageSize:e.pageSize};Object(a.e)("/api-report/report-clique-integral-report",r).then(function(t){var r=t.data;r.errorCode?e.$message.error(r.message):window.location.href=o.a.config+"/api-report/report-clique-integral-report?requestProject="+e.projectName+"&paramTime="+e.month+"&enterpriseId="+e.enterpriseId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize})}if(t){e.$confirm("正在为您导出数据，60S内不能重复点击导出按钮，若数据量过大，可能需要几分钟时间，请耐心等待","提示",{confirmButtonText:"知道了",cancelButtonText:"取消",showCancelButton:!1,type:"warning"}).then(function(){}).catch(function(){});var n=60;window.myTimer2=setInterval(function(){e.downloadExcelAllBool=!1,(n=--n<10?"0"+n:n)<1?(clearInterval(window.myTimer2),e.downloadExcelAllBool=!0):e.downloadExcelAllMsg="倒计时"+n+"秒"},1e3)}}else e.$message.error("没有可导出的数据")}},beforeRouteLeave:function(e,t,r){window.myTimer&&clearInterval(window.myTimer),window.myTimer2&&clearInterval(window.myTimer2),r()}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"integral-all-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("el-select",{attrs:{placeholder:"请选择月份"},on:{change:e.getSelectMonth},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}},e._l(e.dateArr,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1),e._v(" "),r("el-select",{staticClass:"select-m-both",attrs:{placeholder:"请选择"},on:{change:e.selectEnterprise},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}},e._l(e.enterpriseList,function(e){return r("el-option",{key:e.enterpriseId,attrs:{label:e.enterpriseName,value:e.enterpriseId}})}),1),e._v(" "),e.downloadExcelDtlBool?r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.downloadExcelDtl}},[e._v("导出明细数据")]):r("el-button",{staticClass:"fr",attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelDtlMsg))]),e._v(" "),e.downloadExcelAllBool?r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:e.downloadExcelAll}},[e._v("导出汇总数据")]):r("el-button",{staticClass:"fr",staticStyle:{"margin-right":"8px"},attrs:{disabled:"",type:"primary"}},[e._v(e._s(e.downloadExcelAllMsg))])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"myTable",staticClass:"table-no-line-wrap",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.sortChange}},[r("el-table-column",{attrs:{prop:"storeName",label:"成本主体"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"table-first-item"},[e._v(e._s(t.row.endStoreName))]),e._v(" "),r("p",{staticClass:"table-second-item"},[e._v("code："+e._s(t.row.endStoreCode))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"endStoreTypeExcel",label:"成本主体类型",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"brandName",label:"成本主体所属商户",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"settlementGroupName",label:"结算归属",sortable:"custom","render-header":e.renderHeader}}),e._v(" "),r("el-table-column",{attrs:{prop:"integralSettlementValue",label:"结算总积分",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"integralCostValue",label:"结算总成本金额",sortable:"custom",width:"150"}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l=r("C7Lr")(i,s,!1,function(e){r("GblQ")},"data-v-ec32e996",null);t.default=l.exports}});
//# sourceMappingURL=13.5735148d22224c4d550f.js.map