webpackJsonp([16,34,35],{"0xDb":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r("ZLEe"),o=(r.n(i),r("hRKE")),a=(r.n(o),function(e){0})},"3Xzz":function(e,t,r){"use strict";var i=r("P9l9"),o=r("Ch4/"),a=r("0xDb"),s={name:"navpath",data:function(){return{projectName:"gic-clique",navpath:[{name:"首页",path:""},{name:"",path:""},{name:"",path:""}]}},props:{navtip:{type:Boolean,default:!1}},methods:{changeRoute:function(e){Object(a.a)(e),this.$router.push(e)},getNavPath:function(){var e=this,t={project:e.projectName,path:e.$route.path.split("/")[1]};Object(i.e)("/api-auth/get-current-memu-data",t).then(function(t){var r=t.data;if(0==r.errorCode)return r.result?(e.navpath=[],r.result.list&&r.result.list.length&&r.result.list.forEach(function(t,i){t.name=t.menuName,t.path="",i==r.result.list.length-1&&(t.path="/"+t.menuUrl),i>0&&e.navpath.push(t)}),void Object(a.a)("///>>>>",e.navpath)):void Object(a.a)("resData.result: ",r.result);o.a.errorMsg(r)}).catch(function(t){Object(a.a)(t),e.$message.error({duration:1e3,message:t.message})})}},mounted:function(){this.getNavPath()}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"navwrap boxbttom"},[r("el-breadcrumb",{attrs:{separator:"/"}},[e._l(e.navpath,function(t,i){return[t.path?[r("el-breadcrumb-item",{key:i,attrs:{to:{path:t.path}},on:{click:function(r){return e.changeRoute(t.path)}}},[r("span",{staticClass:"el-breadcrumb__inner is-link",on:{click:function(r){return e.changeRoute(t.path)}}},[e._v(e._s(t.name))])])]:[r("el-breadcrumb-item",{key:i},[e._v(e._s(t.name))])]]})],2),e._v(" "),r("h1",{staticClass:"navtitle"},[e._v(e._s(e.navpath[e.navpath.length-1].name))]),e._v(" "),1==e.navtip?r("div",{staticClass:"navtip navmTop"},[r("i",{staticClass:"el-icon-info navtipcolor"}),e._v("变更导航个数，移动顺序，更换页面链接均需提交小程序审核后重新发布生效，其他变更立即生效。小程序审核请联系品牌项目经理。")]):e._e()],1)},staticRenderFns:[]};var l=r("C7Lr")(s,n,!1,function(e){r("pTUQ")},"data-v-320a30ce",null);t.a=l.exports},"6bm4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("P9l9"),o=r("0xDb"),a={name:"cliqueList",props:{enterpriseId:{type:String,default:""},showAgainBool:{type:Boolean,default:!1}},data:function(){return{repProjectName:"gic-clique",searchValue:"",optionsAll:[],optionsAllNew:[],options:[],groupIds:"",storeIds:"",storeIdArr:[],tableData:[],currentPage:1,pageSize:20,totalCount:0,newGroupId:"",dialogVisible:!1,searchBelong:"",dialogVisible2:!1,curIndex:-1,sortColumn:"1",sortType:"asc",loading:!1,popoverShow:!1,checkedList:[],searchBelongVal:""}},watch:{enterpriseId:function(e){this.getCliquePage(),this.getAllBelong(),this.getManyBelong()},showAgainBool:function(e){this.getCliquePage(),this.getAllBelong(),this.getManyBelong()}},methods:{filterLabel:function(e){Object(o.a)(e);var t="";return this.optionsAllNew.map(function(r){e===r.integralSettlementGroupId&&(t=r.groupName)}),t},searchSelectBelong:function(){this.groupIds=this.checkedList.join(","),this.getCliquePage()},delItem:function(e,t){this.checkedList.splice(t,1),this.groupIds=this.checkedList.join(","),this.getCliquePage()},getCliquePage:function(){var e=this;this.loading=!0;var t={enterpriseId:this.enterpriseId,search:this.searchValue,currentPage:this.currentPage,groupIds:this.groupIds,pageSize:this.pageSize,sortColumn:this.sortColumn,sortType:this.sortType};Object(i.e)("/api-admin/clique-page-store-group",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.tableData=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getCliquePage()},handleCurrentChange:function(e){this.currentPage=e,this.getCliquePage()},searchGroup:function(){this.currentPage=1,this.getCliquePage()},getAllBelong:function(){var e=this,t={enterpriseId:this.enterpriseId,search:this.searchBelongVal};Object(i.e)("/api-admin/clique-list-select-group",t).then(function(t){var r=t.data;0==r.errorCode?(e.optionsAllNew=r.result?r.result:[],e.optionsAll=r.result?r.result:[]):e.$message.error(r.message)})},getManyBelong:function(){var e=this,t={enterpriseId:this.enterpriseId,search:this.searchBelongVal};Object(i.e)("/api-admin/clique-list-group",t).then(function(t){var r=t.data;0==r.errorCode?e.options=r.result?r.result:[]:e.$message.error(r.message)})},searchAllBelong:function(){var e=this,t={enterpriseId:this.enterpriseId,search:this.searchBelongVal};Object(i.e)("/api-admin/clique-list-select-group",t).then(function(t){var r=t.data;0==r.errorCode?e.optionsAll=r.result?r.result:[]:e.$message.error(r.message)})},handleSelectionChange:function(e){var t=this;this.storeIdArr=[],e.length>0&&e.forEach(function(e){t.storeIdArr.push(e.storeId)})},changeBelong:function(e,t){this.newGroupId="","only"==e?(this.dialogVisible=!0,this.curIndex=null,this.storeIds=t.storeId):"all"==e&&(this.storeIdArr.length<1?this.$message.error("请选择要变更的门店"):(this.dialogVisible=!0,this.storeIds=this.storeIdArr.join(",")))},selectBelong:function(e,t){this.curIndex=t,this.newGroupId=e.integralSettlementGroupId?e.integralSettlementGroupId:""},sureSelectBtn:function(){var e=this;if(""==this.newGroupId)this.$message.error("请选择结算归属");else{var t={enterpriseId:this.enterpriseId,storeIds:this.storeIds,groupId:this.newGroupId};Object(i.e)("/api-admin/clique-add-group-store",t).then(function(t){var r=t.data;0==r.errorCode?(e.dialogVisible=!1,e.getCliquePage(),e.$message.success("变更成功"),e.$emit("resetEnterpriseList",!0)):e.$message.error(r.message)})}},releaseStore:function(e,t){"only"==e?(this.dialogVisible2=!0,this.storeIds=t.storeId):"all"==e&&(this.storeIdArr.length<1?this.$message.error("请选择要释放的门店"):(this.dialogVisible2=!0,this.storeIds=this.storeIdArr.join(",")))},sureReleaseBtn:function(){var e=this,t={enterpriseId:this.enterpriseId,storeIds:this.storeIds};Object(i.e)("/api-admin/clique-release-store",t).then(function(t){var r=t.data;0==r.errorCode?(e.dialogVisible2=!1,e.getCliquePage(),e.$emit("resetEnterpriseList",!0),e.$message.success("释放成功")):e.$message.error(r.message)})},sortChange:function(e,t,r){var i=e.prop,o=e.order;"groupName"==i?(this.sortColumn="1","ascending"===o?this.sortType="asc":"descending"===o&&(this.sortType="desc")):"storeType"==i&&(this.sortColumn="2","ascending"===o?this.sortType="asc":"descending"===o&&(this.sortType="desc")),this.getCliquePage()}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入门店名称/code","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGroup(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),r("el-popover",{staticClass:"vertical-baseline",attrs:{placement:"bottom-start",width:"214",trigger:"click"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[r("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchAllBelong(t)}},model:{value:e.searchBelongVal,callback:function(t){e.searchBelongVal=t},expression:"searchBelongVal"}}),e._v(" "),e.optionsAll.length>0?r("el-checkbox-group",{staticClass:"dm-checkbox-group",on:{change:e.searchSelectBelong},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.optionsAll,function(t,i){return r("label",{key:i,staticClass:"dm-store__type__item",attrs:{name:t.value}},[r("el-checkbox",{attrs:{label:t.integralSettlementGroupId}},[e._v(e._s(t.groupName))])],1)}),0):r("p",{staticClass:"no-search-belong-data"},[e._v("\n        暂无数据\n      ")]),e._v(" "),r("div",{staticClass:"el-input dm-store__reference w240",attrs:{slot:"reference"},slot:"reference"},[r("div",{staticClass:"el-input__inner dm-store__inputtag"},[e._l(e.checkedList,function(t,i){return r("el-tag",{key:i,attrs:{size:"small",closable:""},on:{close:function(r){return e.delItem(t,i)}}},[e._v(e._s(e.filterLabel(t)))])}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:0===e.checkedList.length,expression:"checkedList.length === 0"}],staticClass:"gray-color dm-store__inputtag--tips"},[e._v("请选择结算归属")])],2),e._v(" "),r("el-popover",{attrs:{placement:"top-start","popper-class":"select-shop__popper",width:"300",trigger:"hover"}},[e._l(e.checkedList,function(t,i){return r("el-tag",{key:i,staticClass:"dm-store__total--tag",attrs:{size:"small",closable:""},on:{close:function(r){return e.delItem(t,i)}}},[e._v(e._s(e.filterLabel(t)))])}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.checkedList.length,expression:"checkedList.length"}],staticClass:"dm-store__inputtag--total",attrs:{slot:"reference"},slot:"reference"},[e._v("共"+e._s(e.checkedList.length)+"项")])],2)],1)],1),e._v(" "),r("div",{staticClass:"fr"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeBelong("all")}}},[e._v("变更结算归属")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.releaseStore("all")}}},[e._v("释放")])],1)],1),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"group-list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"storeName",label:"门店名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"store-name-wrap"},[r("p",{staticClass:"first-item"},[e._v(e._s(t.row.storeName?t.row.storeName:"--"))]),e._v(" "),r("p",{staticClass:"second-item"},[e._v("code："+e._s(t.row.storeCode?t.row.storeCode:"--"))])])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"groupName",label:"结算归属",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"store-name-wrap"},[r("p",{staticClass:"first-item"},[e._v(e._s(t.row.groupName?t.row.groupName:"--"))]),e._v(" "),r("p",{staticClass:"second-item"},[e._v("code："+e._s(t.row.groupCode?t.row.groupCode:"--"))])])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"storeType",label:"门店类型",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.storeType?r("p",[e._v("自营")]):e._e(),e._v(" "),1==t.row.storeType?r("p",[e._v("联营")]):e._e(),e._v(" "),2==t.row.storeType?r("p",[e._v("加盟")]):e._e(),e._v(" "),3==t.row.storeType?r("p",[e._v("代销")]):e._e(),e._v(" "),4==t.row.storeType?r("p",[e._v("托管")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"storeGroupName",label:"门店分组"}}),e._v(" "),r("el-table-column",{attrs:{prop:"opr",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.changeBelong("only",t.row)}}},[e._v("变更归属")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.releaseStore("only",t.row)}}},[e._v("释放")])]}}])})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"选择结算归属",visible:e.dialogVisible,width:"330px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"belong-wrap"},[r("el-input",{attrs:{placeholder:"请输入门店名称/code","prefix-icon":"el-icon-search",clearable:""},model:{value:e.searchBelong,callback:function(t){e.searchBelong=t},expression:"searchBelong"}}),e._v(" "),r("ul",e._l(e.options,function(t,i){return r("li",{key:i,staticClass:"clearfix",class:{on:e.curIndex==i},on:{click:function(r){return e.selectBelong(t,i)}}},[r("p",{staticClass:"fl "},[e._v(e._s(t.groupName))]),e._v(" "),r("p",{staticClass:"fr second-item"},[e._v("code："+e._s(t.groupCode?t.groupCode:"--"))])])}),0)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.sureSelectBtn}},[e._v("确 定")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"释放提示",visible:e.dialogVisible2,width:"425px"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[r("div",{staticClass:"del-wrap"},[r("h3",[e._v("释放后门店归属组为无归属，注意请及时重新分配")])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.sureReleaseBtn}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=r("C7Lr")(a,s,!1,function(e){r("Cywt")},"data-v-3c6bf83e",null);t.default=n.exports},"6iV/":function(e,t,r){"use strict";var i=r("H9GB"),o=r("Ml8i"),a=r("qFr1");e.exports={formats:a,parse:o,stringify:i}},"Ch4/":function(e,t,r){"use strict";var i=r("Ip9M");r.n(i);t.a={errorMsg:function(e){var t=window.location.origin;if(t.indexOf("localhost")&&(t="http://gicdev.demogic.com"),0!=e.errorCode){if(401==e.errorCode)return window.location.href=t+"/gic-web/#/",!1;i.Message.error({duration:1e3,message:e.message})}}}},Cywt:function(e,t){},H9GB:function(e,t,r){"use strict";var i=r("JNAD"),o=r("qFr1"),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,n={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,o,a,s,l,c,u,p,d,g,h){var f=t;if("function"==typeof c)f=c(r,f);else if(f instanceof Date)f=d(f);else if(null===f){if(a)return l&&!h?l(r,n.encoder):r;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||i.isBuffer(f))return l?[g(h?r:l(r,n.encoder))+"="+g(l(f,n.encoder))]:[g(r)+"="+g(String(f))];var m,v=[];if(void 0===f)return v;if(Array.isArray(c))m=c;else{var b=Object.keys(f);m=u?b.sort(u):b}for(var y=0;y<m.length;++y){var C=m[y];s&&null===f[C]||(v=Array.isArray(f)?v.concat(e(f[C],o(r,C),o,a,s,l,c,u,p,d,g,h)):v.concat(e(f[C],r+(p?"."+C:"["+C+"]"),o,a,s,l,c,u,p,d,g,h)))}return v};e.exports=function(e,t){var r=e,s=t?i.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===s.delimiter?n.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:n.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:n.skipNulls,d="boolean"==typeof s.encode?s.encode:n.encode,g="function"==typeof s.encoder?s.encoder:n.encoder,h="function"==typeof s.sort?s.sort:null,f=void 0!==s.allowDots&&s.allowDots,m="function"==typeof s.serializeDate?s.serializeDate:n.serializeDate,v="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:n.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var b,y,C=o.formatters[s.format];"function"==typeof s.filter?r=(y=s.filter)("",r):Array.isArray(s.filter)&&(b=y=s.filter);var _,w=[];if("object"!=typeof r||null===r)return"";_=s.arrayFormat in a?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var x=a[_];b||(b=Object.keys(r)),h&&b.sort(h);for(var q=0;q<b.length;++q){var k=b[q];p&&null===r[k]||(w=w.concat(l(r[k],k,x,u,p,d?g:null,y,h,f,m,C,v)))}var I=w.join(c),N=!0===s.addQueryPrefix?"?":"";return I.length>0?N+I:""}},JNAD:function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var o=t[i],a=o.obj[o.prop],s=Object.keys(a),n=0;n<s.length;++n){var l=s[n],c=a[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:l}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var i=[],o=0;o<t.length;++o)void 0!==t[o]&&i.push(t[o]);r.obj[r.prop]=i}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",i=0;i<t.length;++i){var a=t.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(i):a<128?r+=o[a]:a<2048?r+=o[192|a>>6]+o[128|63&a]:a<55296||a>=57344?r+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(i)),r+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(o.plainObjects||o.allowPrototypes||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var s=t;return Array.isArray(t)&&!Array.isArray(r)&&(s=a(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,a){i.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e(t[a],r,o):t.push(r):t[a]=r}),t):Object.keys(r).reduce(function(t,a){var s=r[a];return i.call(t,a)?t[a]=e(t[a],s,o):t[a]=s,t},s)}}},JgKo:function(e,t){},Ml8i:function(e,t,r){"use strict";var i=r("JNAD"),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t,r){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(i),n=s?i.slice(0,s.index):i,l=[];if(n){if(!r.plainObjects&&o.call(Object.prototype,n)&&!r.allowPrototypes)return;l.push(n)}for(var c=0;null!==(s=a.exec(i))&&c<r.depth;){if(c+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(e,t,r){for(var i=t,o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s)a=(a=[]).concat(i);else{a=r.plainObjects?Object.create(null):{};var n="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(n,10);!isNaN(l)&&s!==n&&String(l)===n&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=i:a[n]=i}i=a}return i}(l,t,r)}};e.exports=function(e,t){var r=t?i.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||i.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){for(var r={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,n=i.split(t.delimiter,s),l=0;l<n.length;++l){var c,u,p=n[l],d=p.indexOf("]="),g=-1===d?p.indexOf("="):d+1;-1===g?(c=t.decoder(p,a.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,g),a.decoder),u=t.decoder(p.slice(g+1),a.decoder)),o.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r}(e,r):e,l=r.plainObjects?Object.create(null):{},c=Object.keys(n),u=0;u<c.length;++u){var p=c[u],d=s(p,n[p],r);l=i.merge(l,d,r)}return i.compact(l)}},P9l9:function(e,t,r){"use strict";r.d(t,"a",function(){return p}),r.d(t,"e",function(){return d}),r.d(t,"d",function(){return g}),r.d(t,"c",function(){return h}),r.d(t,"b",function(){return f});var i=r("rVsN"),o=r.n(i),a=r("lRwf"),s=r.n(a),n=r("6iV/"),l=r.n(n),c=r("Ip9M"),u=(r.n(c),window.location.origin);-1!=u.indexOf("localhost")&&(u="http://gicdev.demogic.com"),s.a.axios.interceptors.request.use(function(e){return e},function(e){return c.Message.error({message:"请求超时!"}),o.a.resolve(e)}),s.a.axios.interceptors.response.use(function(e){if(!e.status||200!=e.status||"error"!=e.data.status)return e;c.Message.error({message:e.data.msg})},function(e){return 504==e.response.status||404==e.response.status||e.response.status,o.a.resolve(e)});var p=function(e,t){return t.requestProject="gic-clique",s.a.axios({method:"get",url:""+u+e,data:{},params:t,headers:{"content-type":"application/x-www-form-urlencoded"}})},d=function(e,t){return t.requestProject="gic-clique",s.a.axios({method:"post",url:""+u+e,data:l.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}})},g=function(e,t){return t.requestProject="gic-clique",s.a.axios({method:"post",url:""+u+e,data:"{}",params:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})},h=function(e,t){return s.a.axios({method:"post",url:""+u+e,data:t,params:{requestProject:"gic-clique"},headers:{"Content-Type":"application/json;charset=UTF-8"}})},f=function(e,t){return t.requestProject="gic-clique",s.a.axios({method:"post",url:""+u+e,data:t,headers:{}})}},kj0T:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("3Xzz"),o=r("P9l9"),a=r("u+DB"),s=r("6bm4"),n={name:"settlementConfig",data:function(){return{repProjectName:"gic-clique",showStyle:"card",applyList:[],enterpriseId:"",enterpriseNum:0,loading:!1,showAgainBool:!0}},mounted:function(){this.getEnterpriseList()},methods:{getEnterpriseList:function(){var e=this;Object(o.e)("/api-admin/clique-integral-enterprise",{}).then(function(t){var r=t.data;0==r.errorCode?(e.applyList=r.result?r.result:[],e.enterpriseId=e.applyList[0].enterpriseId,e.enterpriseNum=0,e.applyList.forEach(function(t){t.isEdit||e.enterpriseNum++})):e.$message.error(r.message)})},changeStyle:function(e){this.showStyle=e,this.showAgainBool=!this.showAgainBool},resetEnterpriseList:function(e){var t=this;Object(o.e)("/api-admin/clique-integral-enterprise",{}).then(function(e){var r=e.data;0==r.errorCode?(t.applyList=r.result?r.result:[],t.enterpriseNum=0,t.applyList.forEach(function(e){e.isEdit||t.enterpriseNum++})):t.$message.error(r.message)})}},components:{topNav:i.a,cliqueCard:a.default,cliqueList:s.default}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"right-wrap"},[r("topNav"),e._v(" "),r("div",{staticClass:"right-content"},[r("div",{staticClass:"right-box"},[r("div",{staticClass:"nav-list-wrap clearfix"},[r("div",{staticClass:"nav-list-content"},[r("el-tooltip",{attrs:{effect:"dark",content:"结算归属概览",placement:"bottom"}},[r("i",{staticClass:"iconfont icon-caidan my-icon ",class:{on:"card"==e.showStyle},on:{click:function(t){return e.changeStyle("card")}}})]),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"结算归属列表",placement:"bottom"}},[r("i",{staticClass:"iconfont icon-xiangqing my-icon",class:{on:"list"==e.showStyle},on:{click:function(t){return e.changeStyle("list")}}})]),e._v(" "),r("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"请选择商户"},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}},e._l(e.applyList,function(t){return r("el-option",{key:t.enterpriseId,attrs:{label:t.enterpriseName,value:t.enterpriseId}},[r("div",{staticClass:"fl enterprise-name",attrs:{title:t.enterpriseName}},[e._v(e._s(t.enterpriseName))]),e._v(" "),r("div",{staticClass:"fr"},[r("el-popover",{attrs:{placement:"top",width:"160",trigger:"hover",content:"此商户下有未归属的门店"}},[r("i",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!item.isEdit"}],staticClass:"iconfont tooltip-icon icon-xinxixianshi",attrs:{slot:"reference"},slot:"reference"})])],1)])}),1),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.enterpriseNum>0,expression:"enterpriseNum > 0"}],staticClass:"enterprise-tip"},[e._v("有"+e._s(e.enterpriseNum)+"个商户未配置（点击左侧下拉列表选择未配置完成的商户，切换至列表样式筛选无归属门店即可定位）")])],1)]),e._v(" "),r("cliqueCard",{directives:[{name:"show",rawName:"v-show",value:"card"==e.showStyle,expression:"showStyle == 'card'"}],attrs:{showAgainBool:e.showAgainBool,enterpriseId:e.enterpriseId}}),e._v(" "),r("cliqueList",{directives:[{name:"show",rawName:"v-show",value:"list"==e.showStyle,expression:"showStyle == 'list'"}],attrs:{showAgainBool:!e.showAgainBool,enterpriseId:e.enterpriseId},on:{resetEnterpriseList:e.resetEnterpriseList}})],1)]),e._v(" "),r("vue-gic-footer")],1)},staticRenderFns:[]};var c=r("C7Lr")(n,l,!1,function(e){r("u9wn")},"data-v-337c0f6e",null);t.default=c.exports},pTUQ:function(e,t){},qFr1:function(e,t,r){"use strict";var i=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"u+DB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("P9l9");var o=r("0xDb"),a=function(e,t,r){t?/^(?!_)[a-zA-Z0-9\u4e00-\u9fa5_]+$/.test(t)?r():r(new Error("结算归属名称只支持汉字、字母、数字和下划线（除首位外）")):r(new Error("请输入结算归属名称"))},s=function(e,t,r){t?/^(?!_)[a-zA-Z0-9_]+$/.test(t)?r():r(new Error("结算归属code只支持字母、数字和下划线（除首位外）")):r(new Error("请输入结算归属code"))},n={name:"cliqueCard",props:{enterpriseId:{type:String,default:""},showAgainBool:{type:Boolean,default:!0}},data:function(){return{repProjectName:"gic-clique",searchValue:"",cardList:[],currentPage:1,pageSize:20,totalCount:0,dialogVisible:!1,cliqueGroupName:"",cliqueGroupCode:"",cliqueGroupNum:null,integralSettlementGroupId:"",cliqueGroupIndex:0,dialogEditVisible:!1,ruleForm:{cliqueGroupName:"",cliqueGroupCode:""},editTitle:"新增结算归属",rules:{cliqueGroupName:[{required:!0,trigger:"blur",validator:a}],cliqueGroupCode:[{required:!0,trigger:"blur",validator:s}]},loading:!1,importTime:"",dialogExportVisible:!1,exportStyle:"1",sortType:1,dialogErrVisible:!1,importErrList:[]}},watch:{enterpriseId:function(e){this.getCliquePage(),this.getImportTime()},showAgainBool:function(e){this.getCliquePage(),this.getImportTime()}},methods:{searchGroup:function(){this.currentPage=1,this.getCliquePage()},getCliquePage:function(){var e=this;this.loading=!0;var t={enterpriseId:this.enterpriseId,search:this.searchValue,sort:this.sortType,currentPage:this.currentPage,pageSize:this.pageSize};Object(i.e)("/api-admin/clique-page-group",t).then(function(t){var r=t.data;e.loading=!1,0==r.errorCode?(e.cardList=r.result.result?r.result.result:[],e.totalCount=r.result.totalCount):e.$message.error(r.message)})},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getCliquePage()},handleCurrentChange:function(e){this.currentPage=e,this.getCliquePage()},delCliqueGroup:function(e,t){this.dialogVisible=!0,this.integralSettlementGroupId=e.integralSettlementGroupId,this.cliqueGroupIndex=t,this.cliqueGroupName=e.groupName,this.cliqueGroupCode=e.groupCode?e.groupCode:"--",this.cliqueGroupNum=e.storeCount},sureDelBtn:function(){var e=this,t={integralSettlementGroupId:this.integralSettlementGroupId};Object(i.e)("/api-admin/clique-del-group",t).then(function(t){var r=t.data;0==r.errorCode?(e.dialogVisible=!1,e.totalCount--,e.cardList.splice(e.cliqueGroupIndex,1),0==e.cardList.length&&e.currentPage>1&&(e.currentPage--,e.getCliquePage()),e.$message.success("删除成功")):e.$message.error(r.message)})},editCliqueGroup:function(e,t){this.dialogEditVisible=!0,"add"==e?(this.editTitle="新增结算归属",this.integralSettlementGroupId="",this.ruleForm.cliqueGroupName="",this.ruleForm.cliqueGroupCode=""):"edit"==e&&(this.editTitle="编辑结算归属",this.integralSettlementGroupId=t.integralSettlementGroupId,this.ruleForm.cliqueGroupName=t.groupName,this.ruleForm.cliqueGroupCode=t.groupCode?t.groupCode:"")},cancelEditBtn:function(){this.dialogEditVisible=!1,this.$refs.ruleForm.clearValidate()},sureEditBtn:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(o.a)("error"),!1;var r={enterpriseId:t.enterpriseId,integralSettlementGroupId:t.integralSettlementGroupId,groupCode:t.ruleForm.cliqueGroupCode,groupName:t.ruleForm.cliqueGroupName};Object(i.e)("/api-admin/clique-save-group",r).then(function(e){var r=e.data;0==r.errorCode?(t.dialogEditVisible=!1,t.getCliquePage(),t.$message.success("保存成功")):t.$message.error(r.message)})})},getImportTime:function(){var e=this,t={enterpriseId:this.enterpriseId};Object(i.e)("/api-admin/clique-last-import-time",t).then(function(t){var r=t.data;0==r.errorCode?e.importTime=r.result.lastImportDate?r.result.lastImportDate:"":e.$message.error(r.message)})},beforeTextUpload:function(e){var t=this,r="xls"===e.name.substr(e.name.length-3);if(r){var i=new FormData;return i.append("file",e),i.append("enterpriseId",this.enterpriseId),i.append("type",this.exportStyle),i.append("requestProject","gic-clique"),this.axios.post("/api-admin/clique-import-settlement",i).then(function(e){var r=e.data;0==r.errorCode?(t.dialogExportVisible=!1,t.$message.success("导入成功"),t.currentPage=1,t.getCliquePage(),t.getImportTime()):1==r.errorCode?(t.dialogErrVisible=!0,t.importErrList=r.result?r.result:[]):t.$message.error(r.message)}),r||!0}this.$message.error("只能上传xls格式!")},downloadTpl:function(){var e=this;Object(i.e)("/api-admin/download-clique-settlement",{}).then(function(t){var r=window.location.origin;r.indexOf("localhost")>-1&&(r="http://gicdev.demogic.com"),window.location.href=r+"/api-admin/download-clique-settlement?requestProject="+e.repProjectName})},sortLetter:function(){this.sortType=1==this.sortType?2:1,this.getCliquePage()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-wrap"},[r("div",{staticClass:"search-wrap clearfix"},[r("div",{staticClass:"search-input fl"},[r("el-input",{attrs:{placeholder:"请输入结算归属名称/code","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGroup(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),r("div",{staticClass:"two-btn-wrap fr"},[r("div",{staticClass:"el-button",attrs:{plain:""}},[r("span",{on:{click:function(t){e.dialogExportVisible=!0}}},[e._v("导入结算归属及门店")]),r("el-popover",{staticClass:"item",attrs:{placement:"bottom",trigger:"hover"}},[r("div",{staticClass:"popover-content-wrap"},[r("p",{directives:[{name:"show",rawName:"v-show",value:e.importTime,expression:"importTime"}]},[e._v("上次导入时间"),r("br"),e._v(e._s(e.importTime))]),e._v(" "),r("el-button",{class:{fr:""!=e.importTime},attrs:{type:"text"},on:{click:e.downloadTpl}},[e._v("下载模板")])],1),e._v(" "),r("i",{staticClass:"icon-more el-icon-more btn-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),r("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.editCliqueGroup("add")}}},[e._v("创建结算归属")]),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按拼音首字母排序",placement:"top-start"}},[r("i",{staticClass:"iconfont icon-paixu1 my-icon-paixu",class:{on:1==e.sortType},on:{click:e.sortLetter}})])],1)]),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"group-list"},[e.totalCount>0?r("div",[r("ul",{staticClass:"clearfix"},e._l(e.cardList,function(t,i){return r("li",{key:i},[r("div",{staticClass:"title clearfix"},[r("h3",{staticClass:"fl"},[e._v(e._s(t.groupName))]),e._v(" "),r("p",{staticClass:"fr"},[r("el-popover",{staticClass:"item",attrs:{placement:"bottom",trigger:"hover"}},[r("div",{staticClass:"popover-group-content"},[r("p",{staticClass:"edit-btn"},[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editCliqueGroup("edit",t)}}},[e._v("编辑")])],1),e._v(" "),r("p",{staticClass:"del-btn"},[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.delCliqueGroup(t,i)}}},[e._v("删除")])],1)]),e._v(" "),r("i",{staticClass:"icon-more el-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1)]),e._v(" "),r("div",{staticClass:"group-info"},[r("p",{staticClass:"group-code"},[e._v("code: "+e._s(t.groupCode?t.groupCode:"--"))]),e._v(" "),r("p",[e._v("门店："+e._s(t.storeCount)+"家")])])])}),0),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}],staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]):r("div",{staticClass:"no-data-wrap"},[r("span",{staticClass:"el-table__empty-text"},[e._v("暂无数据")])])]),e._v(" "),r("el-dialog",{attrs:{title:"删除提示",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"del-wrap"},[r("h3",[e._v("确认将结算归属【"+e._s(e.cliqueGroupName)+"（"+e._s(e.cliqueGroupCode)+"）】删除？")]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.cliqueGroupNum>0,expression:"cliqueGroupNum > 0"}]},[e._v("删除后该结算归属下的门店（"+e._s(e.cliqueGroupNum)+"家）将变为无归属，请及时重新分配")])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.sureDelBtn}},[e._v("确 定")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:e.editTitle,visible:e.dialogEditVisible,"before-close":e.cancelEditBtn,width:"500px"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[r("div",{staticClass:"edit-wrap"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"结算归属名称",prop:"cliqueGroupName"}},[r("dm-input",{attrs:{byteType:1,type:"text",maxlength:8},model:{value:e.ruleForm.cliqueGroupName,callback:function(t){e.$set(e.ruleForm,"cliqueGroupName",t)},expression:"ruleForm.cliqueGroupName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"结算归属code",prop:"cliqueGroupCode"}},[r("dm-input",{attrs:{byteType:1,type:"text",maxlength:16},model:{value:e.ruleForm.cliqueGroupCode,callback:function(t){e.$set(e.ruleForm,"cliqueGroupCode",t)},expression:"ruleForm.cliqueGroupCode"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelEditBtn}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sureEditBtn("ruleForm")}}},[e._v("确 定")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"导入提示",visible:e.dialogExportVisible,width:"510px"},on:{"update:visible":function(t){e.dialogExportVisible=t}}},[r("div",{staticClass:"export-wrap"},[r("div",{staticClass:"export-text"},[e._v("请选择导入方式")]),e._v(" "),r("div",{staticClass:"export-style"},[r("div",{staticClass:"export-style-item"},[r("el-radio",{attrs:{label:"1"},model:{value:e.exportStyle,callback:function(t){e.exportStyle=t},expression:"exportStyle"}},[e._v("追加")]),e._v(" "),r("p",[e._v("追加的门店名称及code不得与现有数据重复，请知悉")])],1),e._v(" "),r("div",{staticClass:"export-style-item"},[r("el-radio",{attrs:{label:"2"},model:{value:e.exportStyle,callback:function(t){e.exportStyle=t},expression:"exportStyle"}},[e._v("覆盖")]),e._v(" "),r("p",[e._v("覆盖原有数据")])],1)])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogExportVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-upload",{staticStyle:{display:"inline-block","margin-left":"8px"},attrs:{action:"/api-admin/clique-import-settlement",name:"uploadFile","show-file-list":!1,"before-upload":e.beforeTextUpload}},[r("el-button",{attrs:{type:"primary"}},[e._v("确 定")])],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"导入错误提示",visible:e.dialogErrVisible,width:"420px"},on:{"update:visible":function(t){e.dialogErrVisible=t}}},[r("div",{staticClass:"del-wrap"},[r("p",[e._l(e.importErrList,function(t,i){return r("span",{key:i},[e._v("【"+e._s(t.storeName)+"（"+e._s(t.storeCode)+"）】")])}),e._v("已存在/不存在，请核实后重新导入。\n      ")],2)]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogErrVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=r("C7Lr")(n,l,!1,function(e){r("JgKo")},"data-v-44799f79",null);t.default=c.exports},u9wn:function(e,t){}});
//# sourceMappingURL=16.895326745b907907a1f1.js.map