webpackJsonp([24],{"0xDb":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("ZLEe"),i=(r.n(n),r("hRKE")),a=(r.n(i),function(e){0})},"3E4D":function(e,t,r){"use strict";var n=r("Ip9M");r.n(n);t.a={showmsg:function(e,t){Object(n.Message)({duration:1e3,message:e,type:t})}}},"3cXf":function(e,t,r){e.exports={default:r("NUnD"),__esModule:!0}},"6iV/":function(e,t,r){"use strict";var n=r("H9GB"),i=r("Ml8i"),a=r("qFr1");e.exports={formats:a,parse:i,stringify:n}},"Ch4/":function(e,t,r){"use strict";var n=r("Ip9M");r.n(n);t.a={errorMsg:function(e){var t=window.location.origin;if(t.indexOf("localhost")&&(t="http://gicdev.demogic.com"),0!=e.errorCode){if(401==e.errorCode)return window.location.href=t+"/gic-web/#/",!1;n.Message.error({duration:1e3,message:e.message})}}}},H9GB:function(e,t,r){"use strict";var n=r("JNAD"),i=r("qFr1"),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,r,i,a,o,c,u,l,d,p,f,m){var h=t;if("function"==typeof u)h=u(r,h);else if(h instanceof Date)h=p(h);else if(null===h){if(a)return c&&!m?c(r,s.encoder):r;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||n.isBuffer(h))return c?[f(m?r:c(r,s.encoder))+"="+f(c(h,s.encoder))]:[f(r)+"="+f(String(h))];var g,v=[];if(void 0===h)return v;if(Array.isArray(u))g=u;else{var b=Object.keys(h);g=l?b.sort(l):b}for(var y=0;y<g.length;++y){var w=g[y];o&&null===h[w]||(v=Array.isArray(h)?v.concat(e(h[w],i(r,w),i,a,o,c,u,l,d,p,f,m)):v.concat(e(h[w],r+(d?"."+w:"["+w+"]"),i,a,o,c,u,l,d,p,f,m)))}return v};e.exports=function(e,t){var r=e,o=t?n.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===o.delimiter?s.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:s.strictNullHandling,d="boolean"==typeof o.skipNulls?o.skipNulls:s.skipNulls,p="boolean"==typeof o.encode?o.encode:s.encode,f="function"==typeof o.encoder?o.encoder:s.encoder,m="function"==typeof o.sort?o.sort:null,h=void 0!==o.allowDots&&o.allowDots,g="function"==typeof o.serializeDate?o.serializeDate:s.serializeDate,v="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:s.encodeValuesOnly;if(void 0===o.format)o.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,o.format))throw new TypeError("Unknown format option provided.");var b,y,w=i.formatters[o.format];"function"==typeof o.filter?r=(y=o.filter)("",r):Array.isArray(o.filter)&&(b=y=o.filter);var j,O=[];if("object"!=typeof r||null===r)return"";j=o.arrayFormat in a?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var x=a[j];b||(b=Object.keys(r)),m&&b.sort(m);for(var N=0;N<b.length;++N){var C=b[N];d&&null===r[C]||(O=O.concat(c(r[C],C,x,l,d,p?f:null,y,m,h,g,w,v)))}var L=O.join(u),_=!0===o.addQueryPrefix?"?":"";return L.length>0?_+L:""}},JNAD:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var c=o[s],u=a[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:c}),r.push(u))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var a=t.charCodeAt(n);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(n):a<128?r+=i[a]:a<2048?r+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?r+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(n+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(n)),r+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(i.plainObjects||i.allowPrototypes||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var o=t;return Array.isArray(t)&&!Array.isArray(r)&&(o=a(t,i)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,a){n.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e(t[a],r,i):t.push(r):t[a]=r}),t):Object.keys(r).reduce(function(t,a){var o=r[a];return n.call(t,a)?t[a]=e(t[a],o,i):t[a]=o,t},o)}}},Mk6G:function(e,t,r){"use strict";t.a={getByteLen:function(e){for(var t=0,r=0;r<e.length;r++){null!=e.charAt(r).match(/[^\x00-\xff]/gi)?t+=2:t+=1}return t},getZhLen:function(e){for(var t=0,r=0;r<e.length;r++){null!=e.charAt(r).match(/[^\x00-\xff]/gi)?t+=1:t+=.5}return Math.ceil(t)},cutStr:function(e,t,r){for(var n=0,i=0;i<e.length;i++){var a=e.charAt(i);if(1==r&&(encodeURI(a).length>2?n+=1:n+=.5),2==r&&(n+=1),n>=t){var o=n==t?i+1:i;return e.substr(0,o)}}},getByteVal:function(e,t){for(var r="",n=0,i=0;i<e.length&&(null!=e[i].match(/[^\x00-\xff]/gi)?n+=1:n+=.5,!(n>t));i++)r+=e[i];return r},getCharVal:function(e,t){for(var r="",n=0,i=0;i<e.length&&(null!=e[i].match(/[^\x00-\xff]/gi)?n+=2:n+=1,!(n>t));i++)r+=e[i];return r},regPos:function(e){return/^\d+(\.\d+)?$/.test(e)}}},Ml8i:function(e,t,r){"use strict";var n=r("JNAD"),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(n),s=o?n.slice(0,o.index):n,c=[];if(s){if(!r.plainObjects&&i.call(Object.prototype,s)&&!r.allowPrototypes)return;c.push(s)}for(var u=0;null!==(o=a.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+n.slice(o.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var a,o=e[i];if("[]"===o)a=(a=[]).concat(n);else{a=r.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);!isNaN(c)&&o!==s&&String(c)===s&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=n:a[s]=n}n=a}return n}(c,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=n.split(t.delimiter,o),c=0;c<s.length;++c){var u,l,d=s[c],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;-1===f?(u=t.decoder(d,a.decoder),l=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),a.decoder),l=t.decoder(d.slice(f+1),a.decoder)),i.call(r,u)?r[u]=[].concat(r[u]).concat(l):r[u]=l}return r}(e,r):e,c=r.plainObjects?Object.create(null):{},u=Object.keys(s),l=0;l<u.length;++l){var d=u[l],p=o(d,s[d],r);c=n.merge(c,p,r)}return n.compact(c)}},NUnD:function(e,t,r){var n=r("/KQr"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},P9l9:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"e",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"c",function(){return m}),r.d(t,"b",function(){return h});var n=r("rVsN"),i=r.n(n),a=r("lRwf"),o=r.n(a),s=r("6iV/"),c=r.n(s),u=r("Ip9M"),l=(r.n(u),window.location.origin);-1!=l.indexOf("localhost")&&(l="http://gicdev.demogic.com"),o.a.axios.interceptors.request.use(function(e){return e},function(e){return u.Message.error({message:"请求超时!"}),i.a.resolve(e)}),o.a.axios.interceptors.response.use(function(e){if(!e.status||200!=e.status||"error"!=e.data.status)return e;u.Message.error({message:e.data.msg})},function(e){return 504==e.response.status||404==e.response.status||e.response.status,i.a.resolve(e)});var d=function(e,t){return t.requestProject="gic-clique",o.a.axios({method:"get",url:""+l+e,data:{},params:t,headers:{"content-type":"application/x-www-form-urlencoded"}})},p=function(e,t){return t.requestProject="gic-clique",o.a.axios({method:"post",url:""+l+e,data:c.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}})},f=function(e,t){return t.requestProject="gic-clique",o.a.axios({method:"post",url:""+l+e,data:"{}",params:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})},m=function(e,t){return o.a.axios({method:"post",url:""+l+e,data:t,params:{requestProject:"gic-clique"},headers:{"Content-Type":"application/json;charset=UTF-8"}})},h=function(e,t){return t.requestProject="gic-clique",o.a.axios({method:"post",url:""+l+e,data:t,headers:{}})}},PDVn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("ZLEe"),i=r.n(n),a=r("3cXf"),o=r.n(a),s=r("Mk6G"),c=r("3E4D"),u=r("Ch4/"),l=r("P9l9"),d=r("0xDb"),p={name:"memberTableEdit",props:["tableEditData"],data:function(){return{accumulateConsum:{},subAchievementList:[],inputLength:6,inputValue:"",editObj:{index:"",row:"",obj:"",type:""},copyOriginObj:JSON.parse(o()(this.tableEditData))}},created:function(){},methods:{consumItemSwitch:function(e,t){Object(d.a)(e,t,t.achievementType),Object(d.a)(t,this.accumulateConsum),this.tempObj=t;var r=1==e?1:0;this.saveSwitch(t.achievementSystemId,r)},saveSwitch:function(e,t){var r=this,n={achievementSystemId:e,openStatus:t};Object(l.c)("/api-member/achievement-open-clique",n).then(function(e){Object(d.a)(e.data.result);var t=e.data;0!=t.errorCode?(r.tempObj.isOpen=!1,u.a.errorMsg(t)):c.a.showmsg("设置成功","success")}).catch(function(e){Object(d.a)(e),r.$message.error({duration:1e3,message:e.message})})},editLimitNum:function(e,t,r,n){this.$forceUpdate(),Object(d.a)(e,t,r),this.editObj.index=e,this.editObj.row=t,this.editObj.obj=r,1==n?t.editLimitFlag=!0:t.editRewardFlag=!0,Object(d.a)(t.editLimitFlag)},saveLimitNum:function(e,t,r,n){if(Object(d.a)(e,t,t.achievementTarget,r),1==n&&0==e&&Number(t.targetInput)>=Number(r[e+1].achievementTarget))this.$message.error({duration:1e3,message:"每一阶都必须大于上一阶，小于下一阶"});else if(1==n&&e==r.length-1&&Number(t.targetInput)<=Number(r[e-1].achievementTarget))this.$message.error({duration:1e3,message:"每一阶都必须大于上一阶，小于下一阶"});else{if(1==n&&e>0&&e<r.length-1&&Number(t.targetInput)<=Number(r[e-1].achievementTarget))return Object(d.a)(e),void this.$message.error({duration:1e3,message:"每一阶都必须大于上一阶，小于下一阶"});if(1==n&&e>0&&e<r.length-1&&Number(t.targetInput)>=Number(r[e+1].achievementTarget))return Object(d.a)(e),void this.$message.error({duration:1e3,message:"每一阶都必须大于上一阶，小于下一阶"});t.achievementTarget=t.targetInput,t.rewardValue=t.rewardInput;var i=t.achievementEnterpriseRankId,a=n,o=t.achievementTarget,s=t.rewardValue;1!=a||""!=String(o).trim()?2!=a||""!=String(s).trim()?(this.saveModify(i,a,o,s),1==a?t.editLimitFlag=!1:t.editRewardFlag=!1,this.inputNum="",this.editObj={index:"",row:"",obj:"",type:""}):this.$message.error({duration:1e3,message:"请输入奖励"}):this.$message.error({duration:1e3,message:"请输入额度"})}},cancelLimitNum:function(e,t,r,n){Object(d.a)(e,t),1==n?(t.editLimitFlag=!1,t.targetInput=t.achievementTarget):(t.editRewardFlag=!1,t.rewardInput=t.rewardValue),this.inputNum="",this.editObj={index:"",row:"",obj:"",type:""}},focusInput:function(e,t,r,n){Object(d.a)("input-focus:",e,t,r,n),this.editObj.index=e,this.editObj.row=t,this.editObj.obj=r,this.editObj.type=n},limitNumInput:function(e){Object(d.a)(e,this.editObj.obj),this.inputNum=s.a.getCharVal(e.target.value.replace(/[^\d]/g,""),this.inputLength),1==this.editObj.type?this.editObj.row.targetInput=this.inputNum:this.editObj.row.rewardInput=this.inputNum,Object(d.a)(this.inputNum)},saveModify:function(e,t,r,n){var i=this,a={achievementEnterpriseRankId:e,updateType:t,achievementTarget:r||"",achievementRewardType:1,rewardValue:n||"",rewardName:"积分XX"};Object(l.c)("/api-member/achievement-update-clique",a).then(function(e){Object(d.a)(e.data);var t=e.data;0!=t.errorCode?u.a.errorMsg(t):c.a.showmsg("设置成功","success")}).catch(function(e){Object(d.a)(e),i.$message.error({duration:1e3,message:e.message})})}},watch:{tableEditData:function(e){if(e&&i()(e).length){var t=e;this.accumulateConsum=t,this.subAchievementList=t.subAchievementList}}},mounted:function(){var e=this.tableEditData;this.accumulateConsum=e,this.subAchievementList=e.subAchievementList}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner-cell-contain"},[r("div",{staticClass:"member-achieve-tabletitle"},[r("label",{staticClass:"tabletitle-l"},[e._v(e._s(e.accumulateConsum.achievementName))]),e._v(" "),r("el-switch",{on:{change:function(t){return e.consumItemSwitch(t,e.accumulateConsum)}},model:{value:e.accumulateConsum.isOpen,callback:function(t){e.$set(e.accumulateConsum,"isOpen",t)},expression:"accumulateConsum.isOpen"}})],1),e._v(" "),r("el-table",{staticClass:"member-cell-table",staticStyle:{width:"100%"},attrs:{data:e.subAchievementList}},[r("el-table-column",{attrs:{prop:"limitNum",label:"额度"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"span-txt"},[e._v(e._s(e.accumulateConsum.text))]),e._v(" "),t.row.editLimitFlag?e._e():r("span",{staticClass:"span-num"},[e._v(e._s(t.row.achievementTarget))]),e._v(" "),t.row.editLimitFlag?r("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:e.inputLength},on:{focus:function(r){return e.focusInput(t.$index,t.row,e.subAchievementList,1)}},nativeOn:{keyup:function(t){return function(t){return e.limitNumInput(t)}(t)}},model:{value:t.row.targetInput,callback:function(r){e.$set(t.row,"targetInput",r)},expression:"scope.row.targetInput"}}):e._e(),e._v(" "),r("span",{staticClass:"span-unit"},[e._v(e._s(e.accumulateConsum.unit))]),e._v(" "),t.row.editLimitFlag?e._e():r("i",{staticClass:"el-icon-edit",on:{click:function(r){return e.editLimitNum(t.$index,t.row,e.subAchievementList,1)}}}),e._v(" "),t.row.editLimitFlag?r("span",{staticClass:"span-oprate-icon"},[r("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(r){return e.saveLimitNum(t.$index,t.row,e.subAchievementList,1)}}},[e._v("保存")]),e._v(" "),r("i",{staticClass:"el-icon-text text-cancel",on:{click:function(r){return e.cancelLimitNum(t.$index,t.row,e.subAchievementList,1)}}},[e._v("取消")])]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardNum",label:"奖励"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"span-txt"},[e._v("奖励")]),e._v(" "),t.row.editRewardFlag?e._e():r("span",{staticClass:"span-num"},[e._v(e._s(t.row.rewardValue))]),e._v(" "),t.row.editRewardFlag?r("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:e.inputLength},on:{focus:function(r){return e.focusInput(t.$index,t.row,e.subAchievementList,2)}},nativeOn:{keyup:function(t){return function(t){return e.limitNumInput(t)}(t)}},model:{value:t.row.rewardInput,callback:function(r){e.$set(t.row,"rewardInput",r)},expression:"scope.row.rewardInput"}}):e._e(),e._v(" "),r("span",{staticClass:"span-unit"},[e._v("积分")]),e._v(" "),t.row.editRewardFlag?e._e():r("i",{staticClass:"el-icon-edit",on:{click:function(r){return e.editLimitNum(t.$index,t.row,e.subAchievementList,2)}}}),e._v(" "),t.row.editRewardFlag?r("span",{staticClass:"span-oprate-icon"},[r("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(r){return e.saveLimitNum(t.$index,t.row,e.subAchievementList,2)}}},[e._v("保存")]),e._v(" "),r("i",{staticClass:"el-icon-text text-cancel",on:{click:function(r){return e.cancelLimitNum(t.$index,t.row,e.subAchievementList,2)}}},[e._v("取消")])]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0==t.row.couponStock?"--":"")+"\n      ")]}}])})],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(p,f,!1,function(e){r("zzCv")},"data-v-536db382",null);t.default=m.exports},qFr1:function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},zzCv:function(e,t){}});
//# sourceMappingURL=24.766262ba8639d147913f.js.map