webpackJsonp([23],{"0xDb":function(t,e,a){"use strict";a.d(e,"a",function(){return i});var n=a("ZLEe"),r=(a.n(n),a("hRKE")),i=(a.n(r),function(t){0})},"3E4D":function(t,e,a){"use strict";var n=a("Ip9M");a.n(n);e.a={showmsg:function(t,e){Object(n.Message)({duration:1e3,message:t,type:e})}}},"3Xzz":function(t,e,a){"use strict";var n=a("P9l9"),r=a("Ch4/"),i=a("0xDb"),s={name:"navpath",data:function(){return{projectName:"gic-clique",navpath:[{name:"首页",path:""},{name:"",path:""},{name:"",path:""}]}},props:{navtip:{type:Boolean,default:!1}},methods:{changeRoute:function(t){Object(i.a)(t),this.$router.push(t)},getNavPath:function(){var t=this,e={project:t.projectName,path:t.$route.path.split("/")[1]};Object(n.e)("/api-auth/get-current-memu-data",e).then(function(e){var a=e.data;if(0==a.errorCode)return a.result?(t.navpath=[],a.result.list&&a.result.list.length&&a.result.list.forEach(function(e,n){e.name=e.menuName,e.path="",n==a.result.list.length-1&&(e.path="/"+e.menuUrl),n>0&&t.navpath.push(e)}),void Object(i.a)("///>>>>",t.navpath)):void Object(i.a)("resData.result: ",a.result);r.a.errorMsg(a)}).catch(function(e){Object(i.a)(e),t.$message.error({duration:1e3,message:e.message})})}},mounted:function(){this.getNavPath()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navwrap boxbttom"},[a("el-breadcrumb",{attrs:{separator:"/"}},[t._l(t.navpath,function(e,n){return[e.path?[a("el-breadcrumb-item",{key:n,attrs:{to:{path:e.path}},on:{click:function(a){return t.changeRoute(e.path)}}},[a("span",{staticClass:"el-breadcrumb__inner is-link",on:{click:function(a){return t.changeRoute(e.path)}}},[t._v(t._s(e.name))])])]:[a("el-breadcrumb-item",{key:n},[t._v(t._s(e.name))])]]})],2),t._v(" "),a("h1",{staticClass:"navtitle"},[t._v(t._s(t.navpath[t.navpath.length-1].name))]),t._v(" "),1==t.navtip?a("div",{staticClass:"navtip navmTop"},[a("i",{staticClass:"el-icon-info navtipcolor"}),t._v("变更导航个数，移动顺序，更换页面链接均需提交小程序审核后重新发布生效，其他变更立即生效。小程序审核请联系品牌项目经理。")]):t._e()],1)},staticRenderFns:[]};var c=a("C7Lr")(s,o,!1,function(t){a("pTUQ")},"data-v-320a30ce",null);e.a=c.exports},"6iV/":function(t,e,a){"use strict";var n=a("H9GB"),r=a("Ml8i"),i=a("qFr1");t.exports={formats:i,parse:r,stringify:n}},8299:function(t,e){},"Ch4/":function(t,e,a){"use strict";var n=a("Ip9M");a.n(n);e.a={errorMsg:function(t){var e=window.location.origin;if(e.indexOf("localhost")&&(e="http://gicdev.demogic.com"),0!=t.errorCode){if(401==t.errorCode)return window.location.href=e+"/gic-web/#/",!1;n.Message.error({duration:1e3,message:t.message})}}}},H9GB:function(t,e,a){"use strict";var n=a("JNAD"),r=a("qFr1"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,a,r,i,s,c,u,l,d,p,m,h){var f=e;if("function"==typeof u)f=u(a,f);else if(f instanceof Date)f=p(f);else if(null===f){if(i)return c&&!h?c(a,o.encoder):a;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return c?[m(h?a:c(a,o.encoder))+"="+m(c(f,o.encoder))]:[m(a)+"="+m(String(f))];var v,g=[];if(void 0===f)return g;if(Array.isArray(u))v=u;else{var b=Object.keys(f);v=l?b.sort(l):b}for(var w=0;w<v.length;++w){var y=v[w];s&&null===f[y]||(g=Array.isArray(f)?g.concat(t(f[y],r(a,y),r,i,s,c,u,l,d,p,m,h)):g.concat(t(f[y],a+(d?"."+y:"["+y+"]"),r,i,s,c,u,l,d,p,m,h)))}return g};t.exports=function(t,e){var a=t,s=e?n.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?o.delimiter:s.delimiter,l="boolean"==typeof s.strictNullHandling?s.strictNullHandling:o.strictNullHandling,d="boolean"==typeof s.skipNulls?s.skipNulls:o.skipNulls,p="boolean"==typeof s.encode?s.encode:o.encode,m="function"==typeof s.encoder?s.encoder:o.encoder,h="function"==typeof s.sort?s.sort:null,f=void 0!==s.allowDots&&s.allowDots,v="function"==typeof s.serializeDate?s.serializeDate:o.serializeDate,g="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:o.encodeValuesOnly;if(void 0===s.format)s.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,s.format))throw new TypeError("Unknown format option provided.");var b,w,y=r.formatters[s.format];"function"==typeof s.filter?a=(w=s.filter)("",a):Array.isArray(s.filter)&&(b=w=s.filter);var j,O=[];if("object"!=typeof a||null===a)return"";j=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var _=i[j];b||(b=Object.keys(a)),h&&b.sort(h);for(var x=0;x<b.length;++x){var I=b[x];d&&null===a[I]||(O=O.concat(c(a[I],I,_,l,d,p?m:null,w,h,f,v,y,g)))}var k=O.join(u),C=!0===s.addQueryPrefix?"?":"";return k.length>0?C+k:""}},JNAD:function(t,e,a){"use strict";var n=Object.prototype.hasOwnProperty,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t,e){for(var a=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(a[n]=t[n]);return a};t.exports={arrayToObject:i,assign:function(t,e){return Object.keys(e).reduce(function(t,a){return t[a]=e[a],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],a=[],n=0;n<e.length;++n)for(var r=e[n],i=r.obj[r.prop],s=Object.keys(i),o=0;o<s.length;++o){var c=s[o],u=i[c];"object"==typeof u&&null!==u&&-1===a.indexOf(u)&&(e.push({obj:i,prop:c}),a.push(u))}return function(t){for(var e;t.length;){var a=t.pop();if(e=a.obj[a.prop],Array.isArray(e)){for(var n=[],r=0;r<e.length;++r)void 0!==e[r]&&n.push(e[r]);a.obj[a.prop]=n}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),a="",n=0;n<e.length;++n){var i=e.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?a+=e.charAt(n):i<128?a+=r[i]:i<2048?a+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?a+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),a+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return a},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,a,r){if(!a)return e;if("object"!=typeof a){if(Array.isArray(e))e.push(a);else{if("object"!=typeof e)return[e,a];(r.plainObjects||r.allowPrototypes||!n.call(Object.prototype,a))&&(e[a]=!0)}return e}if("object"!=typeof e)return[e].concat(a);var s=e;return Array.isArray(e)&&!Array.isArray(a)&&(s=i(e,r)),Array.isArray(e)&&Array.isArray(a)?(a.forEach(function(a,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t(e[i],a,r):e.push(a):e[i]=a}),e):Object.keys(a).reduce(function(e,i){var s=a[i];return n.call(e,i)?e[i]=t(e[i],s,r):e[i]=s,e},s)}}},Mk6G:function(t,e,a){"use strict";e.a={getByteLen:function(t){for(var e=0,a=0;a<t.length;a++){null!=t.charAt(a).match(/[^\x00-\xff]/gi)?e+=2:e+=1}return e},getZhLen:function(t){for(var e=0,a=0;a<t.length;a++){null!=t.charAt(a).match(/[^\x00-\xff]/gi)?e+=1:e+=.5}return Math.ceil(e)},cutStr:function(t,e,a){for(var n=0,r=0;r<t.length;r++){var i=t.charAt(r);if(1==a&&(encodeURI(i).length>2?n+=1:n+=.5),2==a&&(n+=1),n>=e){var s=n==e?r+1:r;return t.substr(0,s)}}},getByteVal:function(t,e){for(var a="",n=0,r=0;r<t.length&&(null!=t[r].match(/[^\x00-\xff]/gi)?n+=1:n+=.5,!(n>e));r++)a+=t[r];return a},getCharVal:function(t,e){for(var a="",n=0,r=0;r<t.length&&(null!=t[r].match(/[^\x00-\xff]/gi)?n+=2:n+=1,!(n>e));r++)a+=t[r];return a},regPos:function(t){return/^\d+(\.\d+)?$/.test(t)}}},Ml8i:function(t,e,a){"use strict";var n=a("JNAD"),r=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(t,e,a){if(t){var n=a.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),o=s?n.slice(0,s.index):n,c=[];if(o){if(!a.plainObjects&&r.call(Object.prototype,o)&&!a.allowPrototypes)return;c.push(o)}for(var u=0;null!==(s=i.exec(n))&&u<a.depth;){if(u+=1,!a.plainObjects&&r.call(Object.prototype,s[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),function(t,e,a){for(var n=e,r=t.length-1;r>=0;--r){var i,s=t[r];if("[]"===s)i=(i=[]).concat(n);else{i=a.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(o,10);!isNaN(c)&&s!==o&&String(c)===o&&c>=0&&a.parseArrays&&c<=a.arrayLimit?(i=[])[c]=n:i[o]=n}n=i}return n}(c,e,a)}};t.exports=function(t,e){var a=e?n.assign({},e):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:i.delimiter,a.depth="number"==typeof a.depth?a.depth:i.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:i.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:i.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:i.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:i.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:i.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:i.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return a.plainObjects?Object.create(null):{};for(var o="string"==typeof t?function(t,e){for(var a={},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,o=n.split(e.delimiter,s),c=0;c<o.length;++c){var u,l,d=o[c],p=d.indexOf("]="),m=-1===p?d.indexOf("="):p+1;-1===m?(u=e.decoder(d,i.decoder),l=e.strictNullHandling?null:""):(u=e.decoder(d.slice(0,m),i.decoder),l=e.decoder(d.slice(m+1),i.decoder)),r.call(a,u)?a[u]=[].concat(a[u]).concat(l):a[u]=l}return a}(t,a):t,c=a.plainObjects?Object.create(null):{},u=Object.keys(o),l=0;l<u.length;++l){var d=u[l],p=s(d,o[d],a);c=n.merge(c,p,a)}return n.compact(c)}},P9l9:function(t,e,a){"use strict";a.d(e,"a",function(){return d}),a.d(e,"e",function(){return p}),a.d(e,"d",function(){return m}),a.d(e,"c",function(){return h}),a.d(e,"b",function(){return f});var n=a("rVsN"),r=a.n(n),i=a("lRwf"),s=a.n(i),o=a("6iV/"),c=a.n(o),u=a("Ip9M"),l=(a.n(u),window.location.origin);-1!=l.indexOf("localhost")&&(l="http://gicdev.demogic.com"),s.a.axios.interceptors.request.use(function(t){return t},function(t){return u.Message.error({message:"请求超时!"}),r.a.resolve(t)}),s.a.axios.interceptors.response.use(function(t){if(!t.status||200!=t.status||"error"!=t.data.status)return t;u.Message.error({message:t.data.msg})},function(t){return 504==t.response.status||404==t.response.status||t.response.status,r.a.resolve(t)});var d=function(t,e){return e.requestProject="gic-clique",s.a.axios({method:"get",url:""+l+t,data:{},params:e,headers:{"content-type":"application/x-www-form-urlencoded"}})},p=function(t,e){return e.requestProject="gic-clique",s.a.axios({method:"post",url:""+l+t,data:c.a.stringify(e),headers:{"content-type":"application/x-www-form-urlencoded"}})},m=function(t,e){return e.requestProject="gic-clique",s.a.axios({method:"post",url:""+l+t,data:"{}",params:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})},h=function(t,e){return s.a.axios({method:"post",url:""+l+t,data:e,params:{requestProject:"gic-clique"},headers:{"Content-Type":"application/json;charset=UTF-8"}})},f=function(t,e){return e.requestProject="gic-clique",s.a.axios({method:"post",url:""+l+t,data:e,headers:{}})}},cxQk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3Xzz"),r=a("Mk6G"),i=a("0xDb"),s={name:"edit-dialog",props:["showEditDialog","projectName","transData"],data:function(){return{repProjectName:"gic-web",acceptData:{radio:"1",point:"",money:10,moneyPoint:10},dialogEdit:!1,inputLength:6}},methods:{numInput:function(t,e){Object(i.a)(t,e),this.inputNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength),this.acceptData.point=this.inputNum},moneyInput:function(t,e){Object(i.a)(t,e),this.moneyInputNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength),this.acceptData.money=this.moneyInputNum},moneyPointInput:function(t,e){Object(i.a)(t,e),this.moneyNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength),this.acceptData.moneyPoint=this.moneyNum},setNewData:function(t){this.dialogEdit=t,Object(i.a)("弹框是否显示: ",t)},checkEditPoint:function(){return!!this.acceptData.point||(this.$message.error({duration:1e3,message:"请输入积分,且不能小于等于0"}),!1)},checkEditMoney:function(){return!(!this.acceptData.money||!this.acceptData.moneyPoint)||(this.$message.error({duration:1e3,message:"请输入金额和积分,且不能小于等于0"}),!1)},dialogEditConfirm:function(){if(Object(i.a)("确认",this.acceptData.radio),0==this.acceptData.radio){if(Object(i.a)(0),!this.checkEditPoint())return;Object(i.a)(1,this.acceptData),this.$emit("setEdit",this.acceptData)}else{if(Object(i.a)(1),!this.checkEditMoney())return;Object(i.a)(2),this.$emit("setEdit",this.acceptData)}},handleEditClose:function(){this.dialogEditcancel()},dialogEditcancel:function(){var t=this;t.$confirm("确认关闭?","",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:""}).then(function(){Object(i.a)("点击确认"),t.radio=null,t.dialogEdit=!1,t.$emit("setEdit")}).catch(function(){Object(i.a)("取消 取消关闭")})},getCardList:function(){var t=this;t.axios.post("/api-plug/get-coupon-list",{}).then(function(e){Object(i.a)(e,e.data,e.data.errorCode);var a=e.data;0!=a.errorCode&&t.$message.error({duration:1e3,message:a.message})}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})}},watch:{showEditDialog:function(t,e){this.setNewData(t)},projectName:function(t,e){this.repProjectName=t||"gic-web"},transData:function(t,e){t.radio=String(t.radio),this.acceptData=t}},mounted:function(){this.repProjectName=this.projectName||"gic-web",this.transData.radio=String(this.transData.radio),this.acceptData=this.transData,this.setNewData(this.showEditDialog)}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-dialog-wrap"},[a("el-dialog",{attrs:{title:"完成订单评价",visible:t.dialogEdit,width:"600px","before-close":t.handleEditClose},on:{"update:visible":function(e){t.dialogEdit=e}}},[a("div",{staticClass:"edit-dialog-body",staticStyle:{padding:"0px 20px"}},[a("div",{staticClass:"edit-row"},[a("el-radio",{attrs:{label:"0"},model:{value:t.acceptData.radio,callback:function(e){t.$set(t.acceptData,"radio",e)},expression:"acceptData.radio"}},[t._v("固定奖励")]),t._v(" "),a("span",{staticClass:"pad-l-10"},[t._v("获得")]),a("el-input",{attrs:{placeholder:"",type:"tel",maxlength:t.inputLength},nativeOn:{keyup:function(e){return function(e,a){return t.numInput(e,void 0)}(e)}},model:{value:t.acceptData.point,callback:function(e){t.$set(t.acceptData,"point",e)},expression:"acceptData.point"}}),a("span",{staticClass:"pad-l-10"},[t._v("积分/笔")])],1),t._v(" "),a("div",{staticClass:"edit-row"},[a("el-radio",{attrs:{label:"1"},model:{value:t.acceptData.radio,callback:function(e){t.$set(t.acceptData,"radio",e)},expression:"acceptData.radio"}},[t._v("按金额设置")]),t._v(" "),a("span",{staticClass:"pad-l-10"},[t._v("订单实付金额每满 ")]),t._v(" "),a("el-input",{attrs:{placeholder:"",type:"tel",maxlength:t.inputLength},nativeOn:{keyup:function(e){return function(e,a){return t.moneyInput(e,void 0)}(e)}},model:{value:t.acceptData.money,callback:function(e){t.$set(t.acceptData,"money",e)},expression:"acceptData.money"}}),t._v(" "),a("span",[t._v("元,得")]),t._v(" "),a("el-input",{attrs:{placeholder:"",type:"tel",maxlength:t.inputLength},nativeOn:{keyup:function(e){return function(e,a){return t.moneyPointInput(e,void 0)}(e)}},model:{value:t.acceptData.moneyPoint,callback:function(e){t.$set(t.acceptData,"moneyPoint",e)},expression:"acceptData.moneyPoint"}}),t._v(" "),a("span",{staticClass:"pad-l-10"},[t._v("积分")])],1)]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogEditcancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.dialogEditConfirm}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("C7Lr")(s,o,!1,function(t){a("uO/k")},"data-v-08350d0a",null).exports,u=a("P9l9"),l=a("3E4D"),d=a("Ch4/"),p={name:"memberTask",data:function(){return{projectName:"gic-clique",memberTab:"first",navpath:[{name:"会员任务",path:""}],inputLength:6,companyGroupTask:[],companyGroupTaskCopy:[],editObj:{index:"",ind:"",row:"",obj:""},merchantSel:"",merchantLists:[],merchantTableData:[],merchantTaskCopy:[],showEditDialog:!1,transData:{radio:"1",point:12,money:"",moneyPoint:""},evaluateData:[],evaluateTextData:[],orderIndex:"",orderInd:"",orderTitle:"",evaluateDataCopy:[]}},created:function(){},methods:{changeRoute:function(t){this.$router.push(t)},handleTabClick:function(t,e){Object(i.a)(t,e)},taskItemSwitch:function(t,e,a,n){if(Object(i.a)(t,e,n),!parseInt(n.rewardValue)&&t)return n.status=!1,void l.a.showmsg("请完善后开启","warning");var r=1==t?1:0;this.changeSwitch(n.missionItemEnterpriseId,r)},editTaskNum:function(t,e,a,n){Object(i.a)(t,e,a),n.editFlag=!0,this.editObj.index=t,this.editObj.row=a},saveTaskNum:function(t,e,a,n){Object(i.a)(t,e,a),a.rewardValue=a.rewardInput;var r=a.missionItemEnterpriseId,s=a.rewardValue;this.saveValue(r,0,"0:0",s),n.editFlag=!1,this.inputNum="",this.editObj={index:"",ind:"",row:"",obj:""}},cancelTaskNum:function(t,e,a,n){Object(i.a)(t,e,a),a.rewardInput=a.rewardValue,n.editFlag=!1,this.inputNum="",this.editObj={index:"",ind:"",row:"",obj:""}},focusInput:function(t,e,a,n){Object(i.a)("input-focus:",t,e,n,a),this.editObj.index=t,this.editObj.ind=e,this.editObj.row=a},pointNumInput:function(t,e){Object(i.a)(t,e),this.inputNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength),this.editObj.row.rewardInput=this.inputNum,Object(i.a)(this.editObj.row)},saveValue:function(t,e,a,n){var r=this,s={missionItemEnterpriseId:t,usedRule:e,rewardRule:a,rewardValue:n};Object(u.c)("/api-member/member-mission-update-clique",s).then(function(t){var e=t.data;Object(i.a)(e),0!=e.errorCode?d.a.errorMsg(e):l.a.showmsg("设置成功","success")}).catch(function(t){Object(i.a)(t),r.$message.error({duration:1e3,message:t.message})})},changeSwitch:function(t,e,a){var n=this,r={missionItemEnterpriseId:t,status:e,missionCode:a||""};Object(u.c)("/api-member/member-mission-open-clique",r).then(function(t){var e=t.data;Object(i.a)(e),0!=e.errorCode?d.a.errorMsg(e):l.a.showmsg("设置成功","success")}).catch(function(t){Object(i.a)(t),n.$message.error({duration:1e3,message:t.message})})},merchantSwitch:function(t,e,a){if(Object(i.a)(t,e,a),!a.rewardValue&&t)return a.status=!1,void l.a.showmsg("请完善后开启","warning");var n=a.missionItemEnterpriseId,r=1==t?1:0;this.saveMerchantSwitch(n,r),Object(i.a)(a)},saveMerchantSwitch:function(t,e){var a=this,n={missionItemEnterpriseId:t,status:e};Object(u.c)("/api-member/member-mission-open",n).then(function(t){Object(i.a)(t.data.result);var e=t.data;0!=e.errorCode?d.a.errorMsg(e):l.a.showmsg("设置成功","success")}).catch(function(t){Object(i.a)(t),a.$message.error({duration:1e3,message:t.message})})},editMerchantNum:function(t,e){Object(i.a)(t,e),e.editTaskFlag=!0,this.editObj.index=t,this.editObj.row=e},saveMerchantNum:function(t,e){Object(i.a)(t,e),e.rewardValue=e.rewardInput;var a=e.missionItemEnterpriseId,n=e.rewardValue;this.saveMemberValue(a,0,"0:0",n,e)},clearSaveInfo:function(){this.inputNum="",this.editObj={index:"",row:""}},saveMemberValue:function(t,e,a,n,r){var s=this,o={missionItemEnterpriseId:t,usedRule:e,rewardRule:a,rewardValue:n};Object(u.c)("/api-member/member-mission-update",o).then(function(t){var e=t.data;if(Object(i.a)(e),0==e.errorCode)return r.editTaskFlag=!1,s.clearSaveInfo(),void l.a.showmsg("设置成功","success");d.a.errorMsg(e)}).catch(function(t){Object(i.a)(t),s.$message.error({duration:1e3,message:t.message})})},cancelMerchantNum:function(t,e){Object(i.a)(t,e),e.rewardInput=e.rewardValue,e.editTaskFlag=!1,this.clearSaveInfo()},focusTask:function(t,e){Object(i.a)("input-focus:",t,e),this.editObj.index=t,this.editObj.row=e},merchantNumInput:function(t,e){Object(i.a)(t,e),this.inputNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength)||0,this.editObj.row.rewardInput=parseInt(this.inputNum)},editOrderNum:function(t,e){this.showEditDialog=!0,Object(i.a)(t,e),this.orderIndex=t,this.orderTitle=e.title,this.transData.flag="all",this.transData.radio=String(e.usedRule),this.transData.point=e.rewardValue,this.transData.money=e.moneyNum,this.transData.moneyPoint=e.moneyPoint,this.transData.missionItemEnterpriseId=e.missionItemEnterpriseId,this.transData.code=e.missionCode},editOrderChildNum:function(t,e,a){Object(i.a)("order child:",t,e,a),this.orderIndex=t,this.orderInd=e,this.orderTitle=a.title,this.showEditDialog=!0,this.transData.flag="child",this.transData.radio=String(a.usedRule),this.transData.point=a.rewardValue,this.transData.money=a.moneyNum,this.transData.moneyPoint=a.moneyPoint,this.transData.missionItemEnterpriseId=a.missionItemEnterpriseId,this.transData.code=""},merchantOrderSwitch:function(t,e,a,n){if(Object(i.a)(t,e,a,n,a.moneyPoint),0===parseInt(a.usedRule)&&!parseInt(a.rewardValue)&&t||1===parseInt(a.usedRule)&&!parseInt(a.moneyPoint)&&t)return a.status=!1,void l.a.showmsg("请完善后开启","warning");var r=a.missionItemEnterpriseId,s=1==t?1:0,o="";"all"==n&&(o=a.missionCode),this.changeSwitch(r,s,o),a.status=t,"all"==n&&a.enterpriseMissonList.forEach(function(e,a){e.status=t}),Object(i.a)(a)},editExtTaskNum:function(t,e){this.$forceUpdate(),Object(i.a)("编辑任务积分:",t,e),e.editTaskFlag=!0,e.rewardInput=e.rewardValue,this.editObj.index=t,this.editObj.row=e},saveExtTaskNum:function(t,e,a){this.$forceUpdate(),Object(i.a)(t,e,a),e.rewardValue=e.rewardInput;var n=e.missionItemEnterpriseId,r=e.rewardValue,s="";"all"==a&&(s=e.missionCode),this.saveExtTaskValue(n,0,"0:0",r,e,s),e.editTaskFlag=!1,"all"==a&&e.enterpriseMissonList.forEach(function(t,a){t.rewardValue=e.rewardValue}),this.inputNum="",this.editObj={index:"",row:"",obj:""}},saveExtTaskValue:function(t,e,a,n,r,s){var o=this,c={missionItemEnterpriseId:t,usedRule:e,rewardRule:a,rewardValue:n,missionCode:s};Object(u.c)("/api-member/member-mission-update-clique",c).then(function(t){var e=t.data;if(Object(i.a)(e),0==e.errorCode)return r.editTaskFlag=!1,o.clearSaveInfo(),void l.a.showmsg("设置成功","success");d.a.errorMsg(e)}).catch(function(t){Object(i.a)(t),o.$message.error({duration:1e3,message:t.message})})},cancelExtTaskNum:function(t,e){this.$forceUpdate(),Object(i.a)(t,e,this.evaluateDataCopy),e.rewardInput=e.rewardValue,e.editTaskFlag=!1,this.inputNum=""},extNumInput:function(t,e){Object(i.a)(t,e),this.inputNum=r.a.getCharVal(t.target.value.replace(/[^\d]/g,""),this.inputLength),this.editObj.row.rewardInput=this.inputNum},setEdit:function(t){if(this.showEditDialog=!1,Object(i.a)("子组件返回:",t),t){var e=t.missionItemEnterpriseId,a=t.radio||0,n=(t.money||0)+":"+(t.moneyPoint||0)||"0:0",r=t.point;1==a&&(r=t.moneyPoint);var s="";t.code&&(s=t.code),Object(i.a)("子组件返回:",e,a,n,r,t,s),this.saveEvaValue(e,a,n,r,t,s)}},handleDataClear:function(t){"all"==t.flag?(Object(i.a)("积分",this.evaluateData),this.evaluateData[this.orderIndex].usedRule=t.radio,0==t.radio?(this.evaluateData[this.orderIndex].rewardValue=t.point,this.evaluateData[this.orderIndex].enterpriseMissonList.forEach(function(e,a){e.rewardValue=t.point,e.usedRule=t.radio})):(this.evaluateData[this.orderIndex].moneyPoint=t.moneyPoint,this.evaluateData[this.orderIndex].moneyNum=t.money,this.evaluateData[this.orderIndex].enterpriseMissonList.forEach(function(e,a){e.usedRule=t.radio,e.moneyNum=t.money,e.moneyPoint=t.moneyPoint}))):(this.evaluateData[this.orderIndex].enterpriseMissonList[this.orderInd].usedRule=t.radio,0==t.radio?this.evaluateData[this.orderIndex].enterpriseMissonList[this.orderInd].rewardValue=t.point:(this.evaluateData[this.orderIndex].enterpriseMissonList[this.orderInd].moneyNum=t.money,this.evaluateData[this.orderIndex].enterpriseMissonList[this.orderInd].moneyPoint=t.moneyPoint)),this.orderIndex="",this.orderInd="",this.orderTitle=""},saveEvaValue:function(t,e,a,n,r,s){var o=this,c={missionItemEnterpriseId:t,usedRule:e,rewardRule:a,rewardValue:n,missionCode:s||""};Object(u.c)("/api-member/member-mission-update-clique",c).then(function(t){var e=t.data;if(Object(i.a)(e),0==e.errorCode)return o.showEditDialog=!1,o.handleDataClear(r),void l.a.showmsg("设置成功","success");d.a.errorMsg(e)}).catch(function(t){Object(i.a)(t),o.$message.error({duration:1e3,message:t.message})})},changeMerchant:function(t){Object(i.a)(this.merchantSel),this.getEnterpriseMemberList()},getEnterpriseMemberList:function(){var t=this,e={enterpriseId:t.merchantSel,missionCode:"perfectInformation"};Object(u.c)("/api-member/clique-enterprise-mission-set",e).then(function(e){var a=e.data;if(Object(i.a)(a),0==a.errorCode){var n=a.result.missionItemList;return n.forEach(function(t,e){t.status=1==t.status,t.rewardInput=t.rewardValue,t.editTaskFlag=!1}),void(t.merchantTableData=n)}d.a.errorMsg(a)}).catch(function(e){Object(i.a)(e),t.$message.error({duration:1e3,message:e.message})})},getEnterpriseList:function(){var t=this;Object(u.e)("/api-member/clique-enterprise-list",{}).then(function(e){var a=e.data;if(Object(i.a)(a),0==a.errorCode){var n=a.result.enterpriseList;return n.length&&(t.merchantSel=n[0].enterpriseId,n.forEach(function(t,e){t.label=t.brandName,t.value=t.enterpriseId})),t.merchantLists=n,void(t.merchantSel&&t.getEnterpriseMemberList())}d.a.errorMsg(a)}).catch(function(e){Object(i.a)(e),t.$message.error({duration:1e3,message:e.message})})},getInfo:function(){var t=this;Object(u.e)("/api-member/member-clique-mission-list",{}).then(function(e){var a=e.data;if(Object(i.a)(a),0==a.errorCode){var n=a.result.missionList;return n.forEach(function(t,e){t.editFlag=!1,t.item.length&&t.item.forEach(function(t,e){t.rewardInput=t.rewardValue,t.status=1==t.status})}),void(t.companyGroupTask=n)}d.a.errorMsg(a)}).catch(function(e){Object(i.a)(e),t.$message.error({duration:1e3,message:e.message})})},getEvaluate:function(){this.getEvaluateInfo("evaluationComment")},getTextEvaluate:function(){this.getEvaluateInfo("orderEvaluation")},getEvaluateInfo:function(t){var e=this,a={missionCode:t};Object(u.c)("/api-member/clique-enterprise-mission-code",a).then(function(a){var n=a.data;if(Object(i.a)(n),0==n.errorCode){var r=[];return r.push(n.result.missionItem),Object(i.a)(r),r.forEach(function(t,e){t.editTaskFlag=!1,t.rewardInput=t.rewardValue,1==t.usedRule?(t.moneyPoint=t.rewardRule.split(":")[1],t.moneyNum=t.rewardRule.split(":")[0]):(t.moneyPoint="",t.moneyNum=""),t.status=1==t.status,t.enterpriseMissonList.length&&t.enterpriseMissonList.forEach(function(t,e){t.status=1==t.status,t.editTaskFlag=!1,t.rewardInput=t.rewardValue,1==t.usedRule?(t.moneyPoint=t.rewardRule.split(":")[1],t.moneyNum=t.rewardRule.split(":")[0]):(t.moneyPoint="",t.moneyNum="")})}),void("orderEvaluation"==t?e.evaluateTextData=r:e.evaluateData=r)}d.a.errorMsg(n)}).catch(function(t){Object(i.a)(t),e.$message.error({duration:1e3,message:t.message})})}},mounted:function(){this.getInfo(),this.getEnterpriseList(),this.getEvaluate(),this.getTextEvaluate()},update:function(){Object(i.a)("up")},components:{topNav:n.a,editDialog:c}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-wrap"},[a("topNav",{attrs:{navpath:t.navpath}}),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.memberTab,callback:function(e){t.memberTab=e},expression:"memberTab"}},[a("el-tab-pane",{attrs:{label:"集团任务",name:"first"}},[a("div",{staticClass:"right-content"},[a("div",{staticClass:"right-box"},[a("div",{staticClass:"attention-wrap member-task-contain"},[a("div",{staticClass:"outer-contain"},[t._l(t.companyGroupTask,function(e,n){return[e.item.length?t._l(e.item,function(r,i){return a("el-row",{key:i,staticClass:"row-task-cell"},[a("el-col",{attrs:{span:8}},[t._v("\n                      "+t._s(r.missionItemName)+"\n                    ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"span-txt"},[t._v("奖励")]),t._v(" "),e.editFlag?t._e():a("span",{staticClass:"span-num"},[t._v(t._s(r.rewardValue))]),t._v(" "),e.editFlag?a("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:t.inputLength},on:{focus:function(a){return t.focusInput(n,i,r,e)}},nativeOn:{keyup:function(e){return function(e,a){return t.pointNumInput(e,void 0)}(e)}},model:{value:r.rewardInput,callback:function(e){t.$set(r,"rewardInput",e)},expression:"taskchild.rewardInput"}}):t._e(),t._v(" "),a("span",{staticClass:"span-unit"},[t._v("积分")]),t._v(" "),e.editFlag?t._e():a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editTaskNum(n,i,r,e)}}}),t._v(" "),e.editFlag?a("span",{staticClass:"span-oprate-icon"},[a("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(a){return t.saveTaskNum(n,i,r,e)}}},[t._v("保存")]),t._v(" "),a("i",{staticClass:"el-icon-text text-cancel",on:{click:function(a){return t.cancelTaskNum(n,i,r,e)}}},[t._v("取消")])]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-switch",{on:{change:function(e){return t.taskItemSwitch(e,n,i,r)}},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"taskchild.status"}})],1)],1)}):t._e()]})],2)])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"商户任务",name:"second"}},[a("div",{staticClass:"right-content"},[a("div",{staticClass:"right-box"},[a("div",{staticClass:"attention-wrap member-task-contain"},[a("div",{staticClass:"outer-contain"},[a("div",{staticClass:"merchant-contain"},[a("div",{staticClass:"merchant-select"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeMerchant(e)}},model:{value:t.merchantSel,callback:function(e){t.merchantSel=e},expression:"merchantSel"}},t._l(t.merchantLists,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-table",{staticClass:"member-cell-table",staticStyle:{width:"100%"},attrs:{data:t.merchantTableData}},[a("el-table-column",{attrs:{prop:"missionItemName",label:"信息字段"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"奖励积分额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"span-txt"},[t._v("奖励")]),t._v(" "),e.row.editTaskFlag?t._e():a("span",{staticClass:"span-num"},[t._v(t._s(e.row.rewardValue))]),t._v(" "),e.row.editTaskFlag?a("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:t.inputLength},on:{focus:function(a){return t.focusTask(e.$index,e.row)}},nativeOn:{keyup:function(e){return function(e,a){return t.merchantNumInput(e,void 0)}(e)}},model:{value:e.row.rewardInput,callback:function(a){t.$set(e.row,"rewardInput",a)},expression:"scope.row.rewardInput"}}):t._e(),t._v(" "),a("span",{staticClass:"span-unit"},[t._v("积分")]),t._v(" "),e.row.editTaskFlag?t._e():a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editMerchantNum(e.$index,e.row)}}}),t._v(" "),e.row.editTaskFlag?a("span",{staticClass:"span-oprate-icon"},[a("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(a){return t.saveMerchantNum(e.$index,e.row)}}},[t._v("保存")]),t._v(" "),a("i",{staticClass:"el-icon-text text-cancel",on:{click:function(a){return t.cancelMerchantNum(e.$index,e.row)}}},[t._v("取消")])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"switchFlag",label:"开关"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{on:{change:function(a){return t.merchantSwitch(a,e.$index,e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])})],1)],1),t._v(" "),t._l(t.evaluateData,function(e,n){return a("div",{key:n,staticClass:"merchant-contain padding-0"},[a("div",[a("el-row",{staticClass:"order-evaluate-row row-thead"},[a("el-col",{attrs:{span:8}},[a("div",{},[t._v(t._s(e.missionItemName))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[1==e.usedRule?a("label",[t._v("每笔")]):t._e(),t._v("奖励 "+t._s(0==e.usedRule?e.rewardValue:e.moneyPoint)+" 积分 "),a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editOrderNum(n,e)}}})])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("el-switch",{on:{change:function(a){return t.merchantOrderSwitch(a,n,e,"all")}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"evaItem.status"}})],1)])],1),t._v(" "),t._l(e.enterpriseMissonList,function(e,r){return a("el-row",{key:r,staticClass:"order-evaluate-row"},[a("el-col",{attrs:{span:8}},[a("div",{},[t._v(t._s(e.brandName))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[1==e.usedRule?a("label",[t._v("每笔")]):t._e(),t._v("奖励 "+t._s(0==e.usedRule?e.rewardValue:e.moneyPoint)+" 积分\n                        "),a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editOrderChildNum(n,r,e)}}})])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("el-switch",{on:{change:function(a){return t.merchantOrderSwitch(a,r,e,"child")}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"bodyItem.status"}})],1)])],1)})],2)])}),t._v(" "),t._l(t.evaluateTextData,function(e,n){return a("div",{key:n,staticClass:"merchant-contain padding-0"},[a("div",[a("el-row",{staticClass:"order-evaluate-row row-thead"},[a("el-col",{attrs:{span:8}},[a("div",{},[t._v(t._s(e.missionItemName))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("span",{staticClass:"span-txt"},[t._v("奖励")]),t._v(" "),e.editTaskFlag?t._e():a("span",{staticClass:"span-num"},[t._v(t._s(e.rewardValue))]),t._v(" "),e.editTaskFlag?a("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:t.inputLength},on:{focus:function(a){return t.focusTask(n,e)}},nativeOn:{keyup:function(e){return function(e){return t.extNumInput(e)}(e)}},model:{value:e.rewardInput,callback:function(a){t.$set(e,"rewardInput",a)},expression:"evaItem.rewardInput"}}):t._e(),t._v(" "),a("span",{staticClass:"span-unit"},[t._v("积分")]),t._v(" "),e.editTaskFlag?t._e():a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editExtTaskNum(n,e)}}}),t._v(" "),e.editTaskFlag?a("span",{staticClass:"span-oprate-icon"},[a("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(a){return t.saveExtTaskNum(n,e,"all")}}},[t._v("保存")]),t._v(" "),a("i",{staticClass:"el-icon-text text-cancel",on:{click:function(a){return t.cancelExtTaskNum(n,e)}}},[t._v("取消")])]):t._e()],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("el-switch",{on:{change:function(a){return t.merchantOrderSwitch(a,n,e,"all")}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"evaItem.status"}})],1)])],1),t._v(" "),t._l(e.enterpriseMissonList,function(e,r){return a("el-row",{key:r,staticClass:"order-evaluate-row"},[a("el-col",{attrs:{span:8}},[a("div",{},[t._v(t._s(e.brandName))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("span",{staticClass:"span-txt"},[t._v("奖励")]),t._v(" "),e.editTaskFlag?t._e():a("span",{staticClass:"span-num"},[t._v(t._s(e.rewardValue))]),t._v(" "),e.editTaskFlag?a("el-input",{staticClass:"w-175",attrs:{size:"small",placeholder:"请输入",type:"tel",maxlength:t.inputLength},on:{focus:function(a){return t.focusTask(n,e)}},nativeOn:{keyup:function(e){return function(e){return t.extNumInput(e)}(e)}},model:{value:e.rewardInput,callback:function(a){t.$set(e,"rewardInput",a)},expression:"bodyItem.rewardInput"}}):t._e(),t._v(" "),a("span",{staticClass:"span-unit"},[t._v("积分")]),t._v(" "),e.editTaskFlag?t._e():a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.editExtTaskNum(r,e)}}}),t._v(" "),e.editTaskFlag?a("span",{staticClass:"span-oprate-icon"},[a("i",{staticClass:"el-icon-text el-button--text text-confirm",on:{click:function(a){return t.saveExtTaskNum(r,e,"child")}}},[t._v("保存")]),t._v(" "),a("i",{staticClass:"el-icon-text text-cancel",on:{click:function(a){return t.cancelExtTaskNum(r,e)}}},[t._v("取消")])]):t._e()],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{},[a("el-switch",{on:{change:function(a){return t.merchantOrderSwitch(a,r,e,"child")}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"bodyItem.status"}})],1)])],1)})],2)])}),t._v(" "),a("edit-dialog",{attrs:{showEditDialog:t.showEditDialog,transData:t.transData},on:{setEdit:t.setEdit}})],2)])])])])],1),t._v(" "),a("vue-gic-footer")],1)},staticRenderFns:[]};var h=a("C7Lr")(p,m,!1,function(t){a("8299")},"data-v-345698ea",null);e.default=h.exports},pTUQ:function(t,e){},qFr1:function(t,e,a){"use strict";var n=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return n.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"uO/k":function(t,e){}});
//# sourceMappingURL=23.0aca9e9c4dec5d6f5b44.js.map